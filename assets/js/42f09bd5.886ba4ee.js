"use strict";(self.webpackChunkneo_dev_portal=self.webpackChunkneo_dev_portal||[]).push([[6465],{3905:function(t,e,n){n.d(e,{Zo:function(){return d},kt:function(){return k}});var a=n(67294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var s=a.createContext({}),c=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):o(o({},e),t)),n},d=function(t){var e=c(t.components);return a.createElement(s.Provider,{value:e},t.children)},p={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},u=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,d=i(t,["components","mdxType","originalType","parentName"]),u=c(n),k=r,m=u["".concat(s,".").concat(k)]||u[k]||p[k]||l;return n?a.createElement(m,o(o({ref:e},d),{},{components:n})):a.createElement(m,o({ref:e},d))}));function k(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=n.length,o=new Array(l);o[0]=u;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=t,i.mdxType="string"==typeof t?t:r,o[1]=i;for(var c=2;c<l;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},95214:function(t,e,n){n.r(e),n.d(e,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var a=n(87462),r=n(63366),l=(n(67294),n(3905)),o=["components"],i={sidebar_label:"Blocks",sidebar_position:4},s="Block",c={unversionedId:"n3/foundation/Blocks",id:"n3/foundation/Blocks",isDocsHomePage:!1,title:"Block",description:"The Blockchain is a data structure. The block is composed of block header and block body. As each block has a crpytographic hash of the previous block (refer to PrevHash in the block header), and a chain structure is formed.",source:"@site/docs/n3/foundation/Blocks.md",sourceDirName:"n3/foundation",slug:"/n3/foundation/Blocks",permalink:"/website/docs/n3/foundation/Blocks",editUrl:"https://github.com/neo-project/neo-dev-portal/blob/master/docs/n3/foundation/Blocks.md",tags:[],version:"current",lastUpdatedBy:"Apisit Toompkadee",sidebarPosition:4,frontMatter:{sidebar_label:"Blocks",sidebar_position:4},sidebar:"docs",previous:{title:"Wallets",permalink:"/website/docs/n3/foundation/Wallets"},next:{title:"Transactions",permalink:"/website/docs/n3/foundation/Transactions"}},d=[{value:"Block Header",id:"block-header",children:[]},{value:"Block",id:"block-1",children:[]}],p={toc:d};function u(t){var e=t.components,i=(0,r.Z)(t,o);return(0,l.kt)("wrapper",(0,a.Z)({},p,i,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"block"},"Block"),(0,l.kt)("p",null,"The Blockchain is a data structure. The block is composed of block header and block body. As each block has a crpytographic hash of the previous block (refer to ",(0,l.kt)("inlineCode",{parentName:"p"},"PrevHash")," in the block header), and a chain structure is formed. "),(0,l.kt)("h2",{id:"block-header"},"Block Header"),(0,l.kt)("p",null,"The data structure of block as following:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Size"),(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"4"),(0,l.kt)("td",{parentName:"tr",align:null},"Version"),(0,l.kt)("td",{parentName:"tr",align:null},"Block Version"),(0,l.kt)("td",{parentName:"tr",align:null},"uint"),(0,l.kt)("td",{parentName:"tr",align:null},"Block version, current is ",(0,l.kt)("inlineCode",{parentName:"td"},"0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"32"),(0,l.kt)("td",{parentName:"tr",align:null},"PrevHash"),(0,l.kt)("td",{parentName:"tr",align:null},"Previous Hash"),(0,l.kt)("td",{parentName:"tr",align:null},"UInt256"),(0,l.kt)("td",{parentName:"tr",align:null},"The previous block's hash")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"32"),(0,l.kt)("td",{parentName:"tr",align:null},"MerkleRoot"),(0,l.kt)("td",{parentName:"tr",align:null},"Merkle Tree    Root"),(0,l.kt)("td",{parentName:"tr",align:null},"Uint256"),(0,l.kt)("td",{parentName:"tr",align:null},"The merkle tree root of the block's transactions")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"8"),(0,l.kt)("td",{parentName:"tr",align:null},"Timestamp"),(0,l.kt)("td",{parentName:"tr",align:null},"Block Timestamp"),(0,l.kt)("td",{parentName:"tr",align:null},"ulong"),(0,l.kt)("td",{parentName:"tr",align:null},"The time when this block is generated")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"8"),(0,l.kt)("td",{parentName:"tr",align:null},"Nonce"),(0,l.kt)("td",{parentName:"tr",align:null},"Random number"),(0,l.kt)("td",{parentName:"tr",align:null},"ulong"),(0,l.kt)("td",{parentName:"tr",align:null},"The random number of the block")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"4"),(0,l.kt)("td",{parentName:"tr",align:null},"Index"),(0,l.kt)("td",{parentName:"tr",align:null},"Block Index"),(0,l.kt)("td",{parentName:"tr",align:null},"uint"),(0,l.kt)("td",{parentName:"tr",align:null},"Block height, and the Genesis Block's index is 0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"PrimaryIndex"),(0,l.kt)("td",{parentName:"tr",align:null},"Speaker index"),(0,l.kt)("td",{parentName:"tr",align:null},"byte"),(0,l.kt)("td",{parentName:"tr",align:null},"Index of the proposal validator in the current round")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"20"),(0,l.kt)("td",{parentName:"tr",align:null},"NextConsensus"),(0,l.kt)("td",{parentName:"tr",align:null},"Address of the next round validator"),(0,l.kt)("td",{parentName:"tr",align:null},"UInt160"),(0,l.kt)("td",{parentName:"tr",align:null},"The script hash of more than two-thirds of validator's signatures for the next round")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"?"),(0,l.kt)("td",{parentName:"tr",align:null},"Witness"),(0,l.kt)("td",{parentName:"tr",align:null},"Witness"),(0,l.kt)("td",{parentName:"tr",align:null},"Witness"),(0,l.kt)("td",{parentName:"tr",align:null},"The executable verification scripts")))),(0,l.kt)("p",null,"The block header contains the basic information of a block and provides verification of a block. "),(0,l.kt)("p",null,"Block ",(0,l.kt)("inlineCode",{parentName:"p"},"hash")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"index")," can be used to identify a block. The hash value is obtained by concatenating the first seven attributes of the block header and performing SHA256 operation twice. Normally, Neo has only one chain, and each block is confirmed by more than two-thirds of the consensus nodes, before added to the blockchain. Therefore, the height of each block is unique. Block height must be equal to the previous block height plus 1, and the Genesis Block height is 0. "),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Timestamp")," is the block's time stamp, must be bigger than the previous one. The internal between two blocks is about 15 seconds, and is set by the variable ",(0,l.kt)("inlineCode",{parentName:"p"},"MillisecondsPerBlock")," in the configuration file ",(0,l.kt)("inlineCode",{parentName:"p"},"config.json"),"."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"NextConsensus")," is the hash of multi-signature contract, which needs the signatures of more than two-thirds of the consensus nodes as parameters. The example script is shown as below. Each block, with the ",(0,l.kt)("inlineCode",{parentName:"p"},"NextConsensus")," field, locks the nodes participating in the next round of consensus activity. In the previous round of consensus activity, the Speaker calculated the consensus nodes of the next round based on the voting at that time, generated the multi-signature contract, and assigned the hash value of the contract to the block's ",(0,l.kt)("inlineCode",{parentName:"p"},"NextConsensus")," field. "),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Witness")," is the verification script of the block, it contains ",(0,l.kt)("inlineCode",{parentName:"p"},"InvocationScript")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"VerificationScript"),". The ",(0,l.kt)("inlineCode",{parentName:"p"},"InvocationScript")," provides the parameters for the ",(0,l.kt)("inlineCode",{parentName:"p"},"VerificationScript")," to execute. "),(0,l.kt)("p",null,(0,l.kt)("img",{src:n(57986).Z})),(0,l.kt)("h2",{id:"block-1"},"Block"),(0,l.kt)("p",null,"The block data structure is as follows:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Size"),(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"\uff1f"),(0,l.kt)("td",{parentName:"tr",align:null},"Header"),(0,l.kt)("td",{parentName:"tr",align:null},"block header"),(0,l.kt)("td",{parentName:"tr",align:null},"Header"),(0,l.kt)("td",{parentName:"tr",align:null},"block header")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"?","*","?"),(0,l.kt)("td",{parentName:"tr",align:null},"Transactions"),(0,l.kt)("td",{parentName:"tr",align:null},"Transaction List"),(0,l.kt)("td",{parentName:"tr",align:null},"Transaction[]"),(0,l.kt)("td",{parentName:"tr",align:null},"The payload of the block")))),(0,l.kt)("p",null,"The block body is a transaction list, which essentially starts with the transaction list length, followed by a list of transactions. In one round of consensus activity, the Speaker selects a series of verified transactions from its memory pool, put the transaction hash into a consensus message (",(0,l.kt)("inlineCode",{parentName:"p"},"PrePareRequest"),") and then broadcast it to the blockchain network. For more details about consensus, refer to ",(0,l.kt)("a",{parentName:"p",href:"./consensus/dbft"},"Consensus Mechanism"),"."),(0,l.kt)("p",null,"At present, there can be up to 512 transactions per block."),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"When a block persistent, it stores a hash list of the block's transaction, and the transaction data is stored separately to facilitate queries."))))}u.isMDXComponent=!0},57986:function(t,e,n){e.Z=n.p+"assets/images/nextconsensus_script-c91e7576b788e8226b339f3fe9f7b51d.jpg"}}]);