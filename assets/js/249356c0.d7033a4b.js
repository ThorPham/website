"use strict";(self.webpackChunkneo_dev_portal=self.webpackChunkneo_dev_portal||[]).push([[4087],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return m}});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),p=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=o,k=u["".concat(c,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(k,i(i({ref:t},s),{},{components:n})):a.createElement(k,i({ref:t},s))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},71658:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return p},assets:function(){return s},toc:function(){return d},default:function(){return m}});var a=n(87462),o=n(63366),r=(n(67294),n(3905)),i=["components"],l={title:"A complete guide to write smart contract with Go on Neo",description:"This article is about the last one since we\u2019re developing it at NEO SPCC. Hope that this article will help you to get an idea of how everything is tied up and being able to start neo-go node, write smart contract and deploy it.",author:"nspcc-dev",tags:["NEO GO"],skill:"beginner",sidebar:!0,image:"./assets/cover.png",source:"https://github.com/nspcc-dev/neo-go-sc-wrkshp"},c=void 0,p={permalink:"/website/tutorials/2021/05/18/neo-go-workshop",source:"@site/tutorials/2021-05-18-neo-go-workshop/index.md",title:"A complete guide to write smart contract with Go on Neo",description:"This article is about the last one since we\u2019re developing it at NEO SPCC. Hope that this article will help you to get an idea of how everything is tied up and being able to start neo-go node, write smart contract and deploy it.",date:"2021-05-18T00:00:00.000Z",formattedDate:"May 18, 2021",tags:[{label:"NEO GO",permalink:"/website/tutorials/tags/neo-go"}],readingTime:30.91,truncated:!1,authors:[{name:"nspcc-dev"}],prevItem:{title:"Real-world Smart Contracts: Building and deploying a Simple Domain Registrar",permalink:"/website/tutorials/2021/05/27/simple-domain-registrar"},nextItem:{title:"Real-world Tokens: Building and deploying a NEP-17 Token",permalink:"/website/tutorials/2021/05/04/real-world-tokens"}},s={image:n(25841).Z,authorsImageUrls:[void 0]},d=[{value:"NEO GO",id:"neo-go",children:[]},{value:"What is a node?",id:"what-is-a-node",children:[]},{value:"Workshop. Preparation",id:"workshop-preparation",children:[]},{value:"Workshop. Part 1",id:"workshop-part-1",children:[]},{value:"Workshop. Part 2",id:"workshop-part-2",children:[{value:"RPC calls",id:"rpc-calls",children:[]},{value:"Storage smart contract",id:"storage-smart-contract",children:[]}]},{value:"Workshop. Part 3",id:"workshop-part-3",children:[{value:"NEP17",id:"nep17",children:[]}]},{value:"Workshop. Part 4",id:"workshop-part-4",children:[{value:"Useful links",id:"useful-links",children:[]}]}],u={toc:d};function m(e){var t=e.components,l=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"neogo",src:n(48178).Z})),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://neo.org/"},"NEO")," builds smart economy and we at ",(0,r.kt)("a",{parentName:"p",href:"https://nspcc.ru/en/"},"NEO SPCC")," help them with that big challenge.\nIn our blog you might find the latest articles ",(0,r.kt)("a",{parentName:"p",href:"https://medium.com/@neospcc/public-neofs-testnet-launch-18f6315c5ced"},"how we run NEOFS public test net"),"\nbut it\u2019s not the only thing we\u2019re working on."),(0,r.kt)("h2",{id:"neo-go"},"NEO GO"),(0,r.kt)("p",null,"As you know network is composed of nodes. These nodes as of now have several implementations:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/neo-project/neo"},"https://github.com/neo-project/neo")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/CityOfZion/neo-python"},"https://github.com/CityOfZion/neo-python")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/nspcc-dev/neo-go"},"https://github.com/nspcc-dev/neo-go"))),(0,r.kt)("p",null,"This article is about the last one since we\u2019re developing it at NEO SPCC.\nHope that this article will help you to get an idea of how everything is tied up and being able to start neo-go node,\nwrite smart contract and deploy it."),(0,r.kt)("h2",{id:"what-is-a-node"},"What is a node?"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"node",src:n(80997).Z})),(0,r.kt)("p",null,"The main goal of the node is to interact with each other (through P2P) and synchronize blocks in the network.\nIt also allows user to compile and run smart contracts within the blockchain network.\nNode consists of Client (CLI), Network layer, Consensus, Virtual Machine, Compiler and Blockchain.\nLet\u2019s take a closer look at each of them. "),(0,r.kt)("h4",{id:"client"},"Client"),(0,r.kt)("p",null,"Client (CLI) allows users to run commands from the terminal. These commands can be divided in 4 categories:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"server operations"),(0,r.kt)("li",{parentName:"ul"},"smart contract operations"),(0,r.kt)("li",{parentName:"ul"},"vm operations"),(0,r.kt)("li",{parentName:"ul"},"wallet operations")),(0,r.kt)("p",null,"For example to connect node to the running private network you can use this command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"}," go run cli/main.go node -p\n")),(0,r.kt)("p",null,"Here you can find more information about Private Network and how to start it. Simply speaking private network -- it\u2019s the network that you can run locally.\nFollow the link if you are interested in more detailed description\n",(0,r.kt)("a",{parentName:"p",href:"https://medium.com/@neospcc/neo-privatenet-auto-import-of-a-smart-contract-dbf2b9220ad2"},"medium article"),".\nAnother usage example is to compile smart contract:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ ./bin/neo-go vm \n\n    _   ____________        __________      _    ____  ___\n   / | / / ____/ __ \\      / ____/ __ \\    | |  / /  |/  /\n  /  |/ / __/ / / / /_____/ / __/ / / /____| | / / /|_/ / \n / /|  / /___/ /_/ /_____/ /_/ / /_/ /_____/ |/ / /  / /  \n/_/ |_/_____/\\____/      \\____/\\____/      |___/_/  /_/   \n\n\nNEO-GO-VM >  \n")),(0,r.kt)("p",null,"Once we run this command we will get an interface to interact with virtual machine.\nTo get a list of all supported operation you just use ",(0,r.kt)("inlineCode",{parentName:"p"},"help"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"NEO-GO-VM > help\n\nCommands:\n  astack        Show alt stack contents\n  break         Place a breakpoint\n  clear         clear the screen\n  cont          Continue execution of the current loaded script\n  estack        Show evaluation stack contents\n  exit          Exit the VM prompt\n  help          display help\n  ip            Show current instruction\n  istack        Show invocation stack contents\n  loadavm       Load an avm script into the VM\n  loadgo        Compile and load a Go file into the VM\n  loadhex       Load a hex-encoded script string into the VM\n  ops           Dump opcodes of the current loaded program\n  run           Execute the current loaded script\n  step          Step (n) instruction in the program\n  stepinto      Stepinto instruction to take in the debugger\n  stepout       Stepout instruction to take in the debugger\n  stepover      Stepover instruction to take in the debugger\n\n")),(0,r.kt)("p",null,"As you can see there are a lot of options to play with it. Let\u2019s take simple smart contract ",(0,r.kt)("inlineCode",{parentName:"p"},"1-print.go")," and compile it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'package main\n\nimport (\n    "github.com/nspcc-dev/neo-go/pkg/interop/runtime"\n)\n\nfunc Main() {\n    runtime.Log("Hello, world!")\n}\n')),(0,r.kt)("p",null,"Use command ",(0,r.kt)("inlineCode",{parentName:"p"},"loadgo")," to compile it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"NEO-GO-VM > loadgo 1-print.go\nREADY: loaded 22 instructions\nNEO-GO-VM 0 >  \n")),(0,r.kt)("p",null,"And there you can see how many instructions were generated and even if you are interested in opcodes of current program you can dump them:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'NEO-GO-VM 0 > ops\n0        PUSHDATA1    48656c6c6f2c20776f726c6421 ("Hello, world!")    <<\n15       SYSCALL      System.Runtime.Log (cfe74796)\n20       NOP\n21       RET\n')),(0,r.kt)("p",null,"Later we will use this compiled contract in a workshop =).\nYou can find more information on how to use the CLI ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go/blob/master/docs/cli.md"},"here")),(0,r.kt)("h4",{id:"network"},"Network"),(0,r.kt)("p",null,"Network layer is one of the most important parts of the node. In our case we have P2P protocol which allows nodes to communicate with each other and RPC -- which is used for getting some information from node like balance, accounts, current state, etc.\nHere is the document where you can find supported ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go/blob/master/docs/rpc.md"},"RPC calls"),"."),(0,r.kt)("h4",{id:"consensus"},"Consensus"),(0,r.kt)("p",null,"Consensus is a mechanism allowing nodes to agree on a specific value (block in case of blockchain). We use our own go-implementation of dBFT algorithm."),(0,r.kt)("h4",{id:"compiler"},"Compiler"),(0,r.kt)("p",null,"Compiler allows to build byte code, so you can write Smart Contract in your favourite Golang. All the output you saw in this example above was generated by the compiler."),(0,r.kt)("h4",{id:"virtual-machine"},"Virtual machine"),(0,r.kt)("p",null,"Virtual machine runs compiled byte code. NeoVM is a ",(0,r.kt)("a",{parentName:"p",href:"https://docs.neo.org/docs/en-us/basic/technology/neovm.html"},"stack-based virtual machine"),". It has 2 stacks for performing computation."),(0,r.kt)("h4",{id:"blockchain"},"Blockchain"),(0,r.kt)("p",null,"And what is the Blockchain piece? It\u2019s quite a big one since it contains operations with accepting/validation transactions,\nsigning transactions, working with accounts, assets, storing blocks in database (or in cache)."),(0,r.kt)("h4",{id:"network-1"},"Network"),(0,r.kt)("p",null,"There are 3 types of network.\nPrivate net -- it\u2019s the private one which you can run locally. Testnet and Mainnet where much of the nodes across the world now running.\nNEO has a nice monitor where you can find particular node running in the blockchain network.\n",(0,r.kt)("a",{parentName:"p",href:"http://monitor.cityofzion.io/"},"Neo Monitor")),(0,r.kt)("h2",{id:"workshop-preparation"},"Workshop. Preparation"),(0,r.kt)("p",null,"In this part we will setup the environment: run private network, connect neo-go node to it and transfer some initial GAS to our basic account\nin order to be able to pay for transaction deployment and invocation. Let's start."),(0,r.kt)("h4",{id:"requirements"},"Requirements"),(0,r.kt)("p",null,"For this workshop you will need Debian 10, Docker, docker-compose, go to be installed:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.docker.com/install/linux/docker-ce/debian/"},"docker")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://golang.org/dl/"},"go"))),(0,r.kt)("h4",{id:"versioning"},"Versioning"),(0,r.kt)("p",null,"As with many other Neo projects NeoGo is currently on its way to Neo 3, so there are two main branches there \u2014 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go"},"master"),",\nwhere all Neo 3 development is happening right now and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go/tree/master-2.x"},"master-2.x")," for stable Neo 2 implementation.\nThis workshop contains basic tutorial notes for Neo 3 version.\nIf you want to continue with Neo 2, please, refer to ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/tree/master-2.x"},"master-2.x branch"),"."),(0,r.kt)("h4",{id:"step-1"},"Step 1"),(0,r.kt)("p",null,"If you already have neo-go or go smart-contracts, please, update go modules in order to be up-to-date with the current interop API changes.\nIf not, download neo-go and build it (master branch):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ git clone https://github.com/nspcc-dev/neo-go.git\n$ cd neo-go\n$ make build \n")),(0,r.kt)("h4",{id:"step-2"},"Step 2"),(0,r.kt)("p",null,"There are 2 ways of running local private network.\nOne way is using neo-local private network and other way is with neo-go private network."),(0,r.kt)("h4",{id:"running-with-neo-go-private-network"},"Running with neo-go private network"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ make env_image\n$ make env_up\n")),(0,r.kt)("p",null,"Result: running privatenet:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'=> Bootup environment\nCreating network "neo_go_network" with the default driver\nCreating volume "docker_volume_chain" with local driver\nCreating neo_go_node_four  ... done\nCreating neo_go_node_two   ... done\nCreating neo_go_node_one   ... done\nCreating neo_go_node_three ... done\n')),(0,r.kt)("p",null,"In case you need to shutdown environment you can use:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ make env_down\n")),(0,r.kt)("h4",{id:"running-with-neo-local-private-network"},"Running with neo local private network"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git clone https://github.com/CityOfZion/neo-local.git\n$ cd neo-local\n$ git checkout -b 4nodes 0.12\n$ make start\n")),(0,r.kt)("h4",{id:"step-3"},"Step 3"),(0,r.kt)("p",null,"Start neo-go node which will connect to previously started privatenet:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go node --privnet\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'2020-12-17T14:51:53.200+0300    INFO    no storage version found! creating genesis block\n2020-12-17T14:51:53.203+0300    INFO    starting rpc-server {"endpoint": ":20331"}\n2020-12-17T14:51:53.203+0300    INFO    service is running  {"service": "Prometheus", "endpoint": ":2112"}\n2020-12-17T14:51:53.203+0300    INFO    service hasn\'t started since it\'s disabled  {"service": "Pprof"}\n2020-12-17T14:51:53.203+0300    INFO    node started    {"blockHeight": 0, "headerHeight": 0}\n\n    _   ____________        __________\n   / | / / ____/ __ \\      / ____/ __ \\\n  /  |/ / __/ / / / /_____/ / __/ / / /\n / /|  / /___/ /_/ /_____/ /_/ / /_/ /\n/_/ |_/_____/\\____/      \\____/\\____/\n\n/NEO-GO:0.91.1-pre-657-gc13d6ecc/\n\n2020-12-17T14:51:53.204+0300    INFO    new peer connected  {"addr": "127.0.0.1:20333", "peerCount": 1}\n2020-12-17T14:51:53.206+0300    INFO    started protocol    {"addr": "127.0.0.1:20333", "userAgent": "/NEO-GO:0.91.1-pre-657-gc13d6ecc/", "startHeight": 0, "id": 3172166887}\n2020-12-17T14:51:54.204+0300    INFO    blockchain persist completed    {"persistedBlocks": 0, "persistedKeys": 71, "headerHeight": 0, "blockHeight": 0, "took": "765.955\xb5s"}\n2020-12-17T14:51:56.204+0300    INFO    new peer connected  {"addr": "127.0.0.1:20336", "peerCount": 2}\n2020-12-17T14:51:56.204+0300    INFO    new peer connected  {"addr": "127.0.0.1:20334", "peerCount": 3}\n2020-12-17T14:51:56.205+0300    INFO    new peer connected  {"addr": "127.0.0.1:20335", "peerCount": 4}\n2020-12-17T14:51:56.205+0300    INFO    new peer connected  {"addr": "127.0.0.1:20333", "peerCount": 5}\n2020-12-17T14:51:56.205+0300    INFO    started protocol    {"addr": "127.0.0.1:20336", "userAgent": "/NEO-GO:0.91.1-pre-657-gc13d6ecc/", "startHeight": 0, "id": 90708676}\n2020-12-17T14:51:56.206+0300    WARN    peer disconnected   {"addr": "127.0.0.1:20333", "reason": "already connected", "peerCount": 4}\n2020-12-17T14:51:56.206+0300    INFO    started protocol    {"addr": "127.0.0.1:20334", "userAgent": "/NEO-GO:0.91.1-pre-657-gc13d6ecc/", "startHeight": 0, "id": 410946741}\n2020-12-17T14:51:56.207+0300    INFO    started protocol    {"addr": "127.0.0.1:20335", "userAgent": "/NEO-GO:0.91.1-pre-657-gc13d6ecc/", "startHeight": 0, "id": 4085957952}\n2020-12-17T14:52:35.213+0300    INFO    blockchain persist completed    {"persistedBlocks": 1, "persistedKeys": 19, "headerHeight": 1, "blockHeight": 1, "took": "518.786\xb5s"}\n2020-12-17T14:52:50.217+0300    INFO    blockchain persist completed    {"persistedBlocks": 1, "persistedKeys": 19, "headerHeight": 2, "blockHeight": 2, "took": "384.966\xb5s"}\n2020-12-17T14:53:05.222+0300    INFO    blockchain persist completed    {"persistedBlocks": 1, "persistedKeys": 19, "headerHeight": 3, "blockHeight": 3, "took": "496.654\xb5s"}\n...\n')),(0,r.kt)("h4",{id:"step-4"},"Step 4"),(0,r.kt)("p",null,"Transfer some GAS from multisig account to our account."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create NEP17 transfer transaction:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"    $ ./bin/neo-go wallet nep17 transfer -w .docker/wallets/wallet1.json --out my_tx.json -r http://localhost:20331 --from NVTiAjNgagDkTr5HTzDmQP9kPwPHN5BgVq --to NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB --token GAS --amount 29999999\n")),(0,r.kt)("p",{parentName:"li"},"Where"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"./bin/neo-go")," runs neo-go"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"wallet nep17 transfer")," - command with arguments in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nspcc-dev/neo-go/blob/master/cli/wallet/nep17.go#L108"},"neo-go")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-w .docker/wallets/wallet1.json")," - path to the ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nspcc-dev/neo-go/blob/master/.docker/wallets/wallet1.json"},"wallet")," for the first node in the private network"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--out my_tx.json")," - output file for the signed transaction"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-r http://localhost:20331")," - RPC node endpoint"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--from NVTiAjNgagDkTr5HTzDmQP9kPwPHN5BgVq")," - multisig account to transfer GAS from"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--to NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB")," - our account from the ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/my_wallet.json"},"wallet")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--token GAS")," - transferred token name, which is GAS"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--amount 29999999")," - amount of GAS to transfer")),(0,r.kt)("p",{parentName:"li"},"Enter the password ",(0,r.kt)("inlineCode",{parentName:"p"},"one"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"Password >\n")),(0,r.kt)("p",{parentName:"li"},"The result is transaction signed by the first node ",(0,r.kt)("inlineCode",{parentName:"p"},"my_tx.json"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Sign the created transaction using the second node address:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go wallet sign -w .docker/wallets/wallet2.json --in my_tx.json --out my_tx2.json --address NVTiAjNgagDkTr5HTzDmQP9kPwPHN5BgVq\n")),(0,r.kt)("p",{parentName:"li"},"Where"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-w .docker/wallets/wallet2.json")," - path to the ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nspcc-dev/neo-go/blob/master/.docker/wallets/wallet2.json"},"wallet")," for the second node in private network"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--in my_tx.json")," - previously created transfer transaction"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--out my_tx2.json")," - output file for the signed transaction"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--address NVTiAjNgagDkTr5HTzDmQP9kPwPHN5BgVq")," - multisig account to sign the transaction")),(0,r.kt)("p",{parentName:"li"},"Enter the password ",(0,r.kt)("inlineCode",{parentName:"p"},"two"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"Enter password to unlock wallet and sign the transaction\nPassword >\n")),(0,r.kt)("p",{parentName:"li"},"The result is transaction signed by both first and second nodes.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Sign the transaction using the third node address and push it to the chain:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go wallet sign -w ./.docker/wallets/wallet3.json --in my_tx2.json --out my_tx3.json --address NVTiAjNgagDkTr5HTzDmQP9kPwPHN5BgVq -r http://localhost:20331\n")),(0,r.kt)("p",{parentName:"li"},"Enter the password ",(0,r.kt)("inlineCode",{parentName:"p"},"three"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"Enter password to unlock wallet and sign the transaction\nPassword >\n")),(0,r.kt)("p",{parentName:"li"},"The result is transaction signed by the first, second and third nodes and deployed to the chain.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Check the balance:"),(0,r.kt)("p",{parentName:"li"},"Now you should have 29999999 GAS on the balance of ",(0,r.kt)("inlineCode",{parentName:"p"},"NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB")," account.\nTo check the transfer was successfully submitted use ",(0,r.kt)("inlineCode",{parentName:"p"},"getnep17transfers")," RPC call:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getnep17transfers", "params": ["NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB"] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",{parentName:"li"},"The result should look like the following:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "result" : {\n      "received" : [\n         {\n            "blockindex" : 4,\n            "assethash" : "0xd2a4cff31913016155e38e474a2c06d08be276cf",\n            "transferaddress" : "NVTiAjNgagDkTr5HTzDmQP9kPwPHN5BgVq",\n            "txhash" : "0x5c7ba46975bbcb3b7389373519cc9979d280208f8bf560f9661ae9942215404f",\n            "timestamp" : 1621345458625,\n            "transfernotifyindex" : 0,\n            "amount" : "2999999900000000"\n         }\n      ],\n      "sent" : [],\n      "address" : "NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB"\n   },\n   "jsonrpc" : "2.0",\n   "id" : 1\n}\n')),(0,r.kt)("h2",{id:"workshop-part-1"},"Workshop. Part 1"),(0,r.kt)("p",null,"Now you have all things done to write your first smart contract, deploy and invoke it.\nLet\u2019s go!"),(0,r.kt)("h4",{id:"step-1-1"},"Step 1"),(0,r.kt)("p",null,'Create basic "Hello World" smart contract (or use the one presented in this repo):'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'package main\n\nimport (\n    "github.com/nspcc-dev/neo-go/pkg/interop/runtime"\n)\n\nfunc Main() {\n    runtime.Log("Hello, world!")\n}\n')),(0,r.kt)("p",null,"And save it as ",(0,r.kt)("inlineCode",{parentName:"p"},"1-print.go"),"."),(0,r.kt)("p",null,"Create a configuration for it:\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/1-print.yml"},"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/1-print.yml")),(0,r.kt)("h4",{id:"step-2-1"},"Step 2"),(0,r.kt)("p",null,'Compile "Hello World" smart contract:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract compile -i 1-print.go -c 1-print.yml -m 1-print.manifest.json\n")),(0,r.kt)("p",null,"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"./bin/neo-go")," runs neo-go"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"contract compile")," command with arguments in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nspcc-dev/neo-go/blob/master/cli/smartcontract/smart_contract.go#L105"},"neo-go")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-i 1-print.go")," path to smart contract"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-c 1-print.yml")," path to configuration file"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-m 1-print.manifest.json")," path to manifest file, which is required for smart contract deployment")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("p",null,"Compiled smart-contract: ",(0,r.kt)("inlineCode",{parentName:"p"},"1-pring.nef")," and smart contract manifest ",(0,r.kt)("inlineCode",{parentName:"p"},"1-print.manifest.json")),(0,r.kt)("p",null,"To dump all the opcodes, you can use:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract inspect -i 1-print.nef\n")),(0,r.kt)("h4",{id:"step-3-1"},"Step 3"),(0,r.kt)("p",null,"Deploy smart contract to the previously setup network:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract deploy -i 1-print.nef -manifest 1-print.manifest.json -r http://localhost:20331 -w my_wallet.json\n")),(0,r.kt)("p",null,"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"contract deploy")," is a command for deployment"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-i 1-print.nef")," path to smart contract"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-manifest 1-print.manifest.json")," smart contract manifest file"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-r http://localhost:20331")," node endpoint"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-w my_wallet.json")," wallet to use to get the key for transaction signing (you can use one from the workshop repo)")),(0,r.kt)("p",null,"Enter password ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty")," for the account:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Enter account NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB password >\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Contract: ecdd946811bcfe48feefb91c927234a6f18e341c\nb164f03a5dfc61273f7ebaf8943ff49a3ee1971babd25c7a817d46a2374f624a\n")),(0,r.kt)("p",null,"At this point your \u2018Hello World\u2019 contract is deployed and could be invoked. Let\u2019s do it as a final step."),(0,r.kt)("h4",{id:"step-4-1"},"Step 4"),(0,r.kt)("p",null,"Invoke contract."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json ecdd946811bcfe48feefb91c927234a6f18e341c main\n")),(0,r.kt)("p",null,"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"contract invokefunction")," runs invoke with provided parameters"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-r http://localhost:20331")," defines RPC endpoint used for function call"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-w my_wallet.json")," is a wallet"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ecdd946811bcfe48feefb91c927234a6f18e341c")," contract hash got as an output from the previous command (deployment in step 6)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"main")," - method to be called")),(0,r.kt)("p",null,"Enter password ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty")," for account:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Enter account NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB password >\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction bfb0398f22ae15628a1353c3b84afba6ff994e48cd376b840825314abf9bc291\n")),(0,r.kt)("p",null,"In the console where you were running step #5 you will get:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'2020-12-17T15:29:48.790+0300    INFO    runtime log {"tx": "bfb0398f22ae15628a1353c3b84afba6ff994e48cd376b840825314abf9bc291", "script": "ecdd946811bcfe48feefb91c927234a6f18e341c", "msg": "Hello, world!"}\n')),(0,r.kt)("p",null,"Which means that this contract was executed."),(0,r.kt)("p",null,"This is it. There are only 4 steps to make deployment and they look easy, aren\u2019t they?\nThank you!"),(0,r.kt)("h2",{id:"workshop-part-2"},"Workshop. Part 2"),(0,r.kt)("p",null,"In this part we'll look at RPC calls and try to write, deploy and invoke smart contract with storage.\nLet\u2019s go!"),(0,r.kt)("h3",{id:"rpc-calls"},"RPC calls"),(0,r.kt)("p",null,"Let's check what's going on under the hood.\nEach neo-go node provides an API interface for obtaining blockchain data from it.\nThe interface is provided via ",(0,r.kt)("inlineCode",{parentName:"p"},"JSON-RPC"),", and the underlying protocol uses HTTP for communication."),(0,r.kt)("p",null,"Full ",(0,r.kt)("inlineCode",{parentName:"p"},"NEO JSON-RPC 3.0 API")," described ",(0,r.kt)("a",{parentName:"p",href:"https://docs.neo.org/v3/docs/en-us/reference/rpc/latest-version/api.html"},"here"),"."),(0,r.kt)("p",null,"RPC-server of started in step #3 neo-go node is available on ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost:20331"),", so let's try to perform several RPC calls."),(0,r.kt)("h4",{id:"getrawtransaction"},"GetRawTransaction"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.neo.org/v3/docs/en-us/reference/rpc/latest-version/api/getrawtransaction.html"},"GetRawTransaction")," returns\nthe corresponding transaction information, based on the specified hash value."),(0,r.kt)("p",null,"Request information about our deployment transaction:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getrawtransaction", "params": ["b164f03a5dfc61273f7ebaf8943ff49a3ee1971babd25c7a817d46a2374f624a", 1] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",null,"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"jsonrpc": "2.0"')," is protocol version"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"id": 1')," is id of current request"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"method": "getrawtransaction"')," is requested method"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"params": ["b164f03a5dfc61273f7ebaf8943ff49a3ee1971babd25c7a817d46a2374f624a", 1]')," is an array of parameters,\nwhere",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"b164f03a5dfc61273f7ebaf8943ff49a3ee1971babd25c7a817d46a2374f624a")," is deployment transaction hash"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"1")," is ",(0,r.kt)("inlineCode",{parentName:"li"},"verbose")," parameter for detailed JSON string output"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"json_pp")," just makes the JSON output prettier")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "jsonrpc" : "2.0",\n   "result" : {\n      "confirmations" : 11,\n      "netfee" : "1546520",\n      "script" : "DQQBeyJuYW1lIjoiSGVsbG9Xb3JsZCBjb250cmFjdCIsImFiaSI6eyJtZXRob2RzIjpbeyJuYW1lIjoibWFpbiIsIm9mZnNldCI6MCwicGFyYW1ldGVycyI6W10sInJldHVybnR5cGUiOiJWb2lkIiwic2FmZSI6ZmFsc2V9XSwiZXZlbnRzIjpbXX0sImZlYXR1cmVzIjp7fSwiZ3JvdXBzIjpbXSwicGVybWlzc2lvbnMiOlt7ImNvbnRyYWN0IjoiKiIsIm1ldGhvZHMiOiIqIn1dLCJzdXBwb3J0ZWRzdGFuZGFyZHMiOltdLCJ0cnVzdHMiOltdLCJleHRyYSI6bnVsbH0MZE5FRjNuZW8tZ28tMC45NS4xLXByZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWDA1IZWxsbywgd29ybGQhQc/nR5YhQLbNunASwB8MBmRlcGxveQwU/aP6Q0bqUyolj8SX3a3bZDfJ/f9BYn1bUg==",\n      "sysfee" : "1001060650",\n      "blocktime" : 1621345578680,\n      "witnesses" : [\n         {\n            "invocation" : "DECFNf91SCJf0Xj5MqwQY9lEFMKYiwkm/wHxvx8B/1gT0TkfH2eL8sSHM4b99QklcRAUgNfniPYacMtMaOCfrTlv",\n            "verification" : "DCEDhEhWuuSSNuCc7nLsxQhI8nFlt+UfY3oP0/UkYmdH7G5BVuezJw=="\n         }\n      ],\n      "attributes" : [],\n      "vmstate" : "HALT",\n      "hash" : "0xb164f03a5dfc61273f7ebaf8943ff49a3ee1971babd25c7a817d46a2374f624a",\n      "nonce" : 1906296755,\n      "validuntilblock" : 13,\n      "blockhash" : "0x75e8dd246c40806b49502471d2d6244fcf8ae881216989119a3e32f0ddeb6959",\n      "sender" : "NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB",\n      "signers" : [\n         {\n            "scopes" : "None",\n            "account" : "0x410b5658f92f9937ed7bdd4ba04c665d3bdbd8ae"\n         }\n      ],\n      "size" : 563,\n      "version" : 0\n   },\n   "id" : 1\n}\n')),(0,r.kt)("h4",{id:"getapplicationlog"},"GetApplicationLog"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.neo.org/v3/docs/en-us/reference/rpc/latest-version/api/getapplicationlog.html"},"GetApplicationLog")," returns the contract log based on the specified transaction id."),(0,r.kt)("p",null,"Request application log for invocation transaction from step #4:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getapplicationlog", "params": ["bfb0398f22ae15628a1353c3b84afba6ff994e48cd376b840825314abf9bc291"] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",null,"With a single parameter:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"bfb0398f22ae15628a1353c3b84afba6ff994e48cd376b840825314abf9bc291")," - invocation transaction hash from step #7")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "jsonrpc" : "2.0",\n   "result" : {\n      "executions" : [\n         {\n            "trigger" : "Application",\n            "notifications" : [],\n            "gasconsumed" : "2028330",\n            "stack" : [\n               {\n                  "type" : "Any"\n               }\n            ],\n            "vmstate" : "HALT"\n         }\n      ],\n      "txid" : "0xbfb0398f22ae15628a1353c3b84afba6ff994e48cd376b840825314abf9bc291"\n   },\n   "id" : 1\n}\n')),(0,r.kt)("h4",{id:"other-useful-rpc-calls"},"Other Useful RPC calls"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 5, "method": "getversion", "params": [] }\' localhost:20331\ncurl -d \'{ "jsonrpc": "2.0", "id": 5, "method": "getblockcount", "params": [] }\' localhost:20331\ncurl -d \'{ "jsonrpc": "2.0", "id": 5, "method": "getconnectioncount", "params": [] }\' localhost:20331\ncurl -d \'{ "jsonrpc": "2.0", "id": 5, "method": "getcontractstate", "params": ["0xecdd946811bcfe48feefb91c927234a6f18e341c"] }\' localhost:20331\n')),(0,r.kt)("p",null,"List of supported by neo-go node RPC commands you can find ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go/blob/master/docs/rpc.md#supported-methods"},"here"),"."),(0,r.kt)("h3",{id:"storage-smart-contract"},"Storage smart contract"),(0,r.kt)("p",null,"Let's take a look at the another smart contract example: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/2-storage.go"},"2-storage.go"),".\nThis contract is quite simple and, as the previous one, doesn't take any arguments.\nOn the other hand, it is able to count the number of its own invocations by storing an integer value and increment it after each invocation.\nWe are interested in this contract as far as it's able to ",(0,r.kt)("em",{parentName:"p"},"store")," values, i.e. it has a ",(0,r.kt)("em",{parentName:"p"},"storage")," which can be shared within all contract invocations.\nWe have to pay some GAS for storage usage, the amount depends on the storage operation (e.g. put) and data size."),(0,r.kt)("p",null,"This contract also has a special internal ",(0,r.kt)("inlineCode",{parentName:"p"},"_deploy")," method which is executed when the contract is deployed or updated.\nIt should return no value and accept single bool argument which will be true on contract update.\nOur ",(0,r.kt)("inlineCode",{parentName:"p"},"_deploy")," method is aimed to initialise the storage value with ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," when the contract will be deployed."),(0,r.kt)("p",null,"Now, when we learned about the storage, let's try to deploy and invoke our contract!"),(0,r.kt)("h4",{id:"step-1-2"},"Step #1"),(0,r.kt)("p",null,"Compile smart contract ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/2-storage.go"},"2-storage.go"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract compile -i 2-storage.go -c 2-storage.yml -m 2-storage.manifest.json\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("p",null,"Compiled smart-contract: ",(0,r.kt)("inlineCode",{parentName:"p"},"2-storage.nef")," and smart contract manifest ",(0,r.kt)("inlineCode",{parentName:"p"},"2-storage.manifest.json")),(0,r.kt)("h4",{id:"step-2-2"},"Step #2"),(0,r.kt)("p",null,"Deploy compiled smart contract:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract deploy -i 2-storage.nef -manifest 2-storage.manifest.json -r http://localhost:20331 -w my_wallet.json\n")),(0,r.kt)("p",null,"... enter the password ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Enter account NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB password >\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Contract: 1b2fb1dc5b32934abae1ad1706b0e43513c44e66\n1ea2a1ed6c2f651436e9fcf41023119f934cd0a4f38cac16ac9042c124345f0c\n")),(0,r.kt)("p",null,"Which means that our contract was deployed and now we can invoke it."),(0,r.kt)("p",null,"Let's check that the storage value was initialised with ",(0,r.kt)("inlineCode",{parentName:"p"},"0"),". Use ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicaionlog")," RPC-call for the deployment transaction:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getapplicationlog", "params": ["1ea2a1ed6c2f651436e9fcf41023119f934cd0a4f38cac16ac9042c124345f0c"] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",null,"The JSON result is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "result" : {\n      "txid" : "0x1ea2a1ed6c2f651436e9fcf41023119f934cd0a4f38cac16ac9042c124345f0c",\n      "executions" : [\n         {\n            "gasconsumed" : "1006244000",\n            "notifications" : [\n               {\n                  "eventname" : "info",\n                  "state" : {\n                     "value" : [\n                        {\n                           "type" : "ByteString",\n                           "value" : "U3RvcmFnZSBrZXkgbm90IHlldCBzZXQuIFNldHRpbmcgdG8gMA=="\n                        }\n                     ],\n                     "type" : "Array"\n                  },\n                  "contract" : "0x1b2fb1dc5b32934abae1ad1706b0e43513c44e66"\n               },\n               {\n                  "state" : {\n                     "type" : "Array",\n                     "value" : [\n                        {\n                           "type" : "ByteString",\n                           "value" : "U3RvcmFnZSBrZXkgaXMgaW5pdGlhbGlzZWQ="\n                        }\n                     ]\n                  },\n                  "eventname" : "info",\n                  "contract" : "0x1b2fb1dc5b32934abae1ad1706b0e43513c44e66"\n               },\n               {\n                  "contract" : "0xfffdc93764dbaddd97c48f252a53ea4643faa3fd",\n                  "state" : {\n                     "type" : "Array",\n                     "value" : [\n                        {\n                           "type" : "ByteString",\n                           "value" : "Zk7EEzXksAYXreG6SpMyW9yxLxs="\n                        }\n                     ]\n                  },\n                  "eventname" : "Deploy"\n               }\n            ],\n            "vmstate" : "HALT",\n            "stack" : [\n            ... skipped serialized contract representation ...\n            ],\n            "trigger" : "Application"\n         }\n      ]\n   },\n   "id" : 1,\n   "jsonrpc" : "2.0"\n}\n')),(0,r.kt)("p",null,"Pay attention to the ",(0,r.kt)("inlineCode",{parentName:"p"},"notifications")," JSON field: it contains two ",(0,r.kt)("inlineCode",{parentName:"p"},"info")," notifications with base64-encoded messages.\nTo decode them just use ",(0,r.kt)("inlineCode",{parentName:"p"},"echo string | base64 -d")," CLI command, e.g.:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ echo U3RvcmFnZSBrZXkgbm90IHlldCBzZXQuIFNldHRpbmcgdG8gMA== | base64 -d\n")),(0,r.kt)("p",null,"which results in ",(0,r.kt)("inlineCode",{parentName:"p"},"Storage key not yet set. Setting to 0")," and"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ echo U3RvcmFnZSBrZXkgaXMgaW5pdGlhbGlzZWQ= | base64 -d\n")),(0,r.kt)("p",null,"which is ",(0,r.kt)("inlineCode",{parentName:"p"},"Storage key is initialised"),"."),(0,r.kt)("h4",{id:"step-3-2"},"Step #3"),(0,r.kt)("p",null,"Let's invoke our contract. As far as we have never invoked this contract, it should increment value from the storage (which is ",(0,r.kt)("inlineCode",{parentName:"p"},"0"),") and put the new ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," value back into the storage.\nLet's check:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 1b2fb1dc5b32934abae1ad1706b0e43513c44e66 main\n")),(0,r.kt)("p",null,"... enter the password ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Enter account NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB password >\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction ecc5aecf2334b06e0b5d76494bfdf3ddbaca675858f254aa4e4633756b86a40d\n")),(0,r.kt)("p",null,"To check the counter value, call ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicaionlog")," RPC-call for the invocation transaction:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getapplicationlog", "params": ["ecc5aecf2334b06e0b5d76494bfdf3ddbaca675858f254aa4e4633756b86a40d"] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",null,"The JSON result is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "result" : {\n      "txid" : "0xecc5aecf2334b06e0b5d76494bfdf3ddbaca675858f254aa4e4633756b86a40d",\n      "executions" : [\n         {\n            "notifications" : [\n               {\n                  "state" : {\n                     "type" : "Array",\n                     "value" : [\n                        {\n                           "type" : "ByteString",\n                           "value" : "VmFsdWUgcmVhZCBmcm9tIHN0b3JhZ2U="\n                        }\n                     ]\n                  },\n                  "contract" : "0x1b2fb1dc5b32934abae1ad1706b0e43513c44e66",\n                  "eventname" : "info"\n               },\n               {\n                  "state" : {\n                     "type" : "Array",\n                     "value" : [\n                        {\n                           "type" : "ByteString",\n                           "value" : "U3RvcmFnZSBrZXkgYWxyZWFkeSBzZXQuIEluY3JlbWVudGluZyBieSAx"\n                        }\n                     ]\n                  },\n                  "contract" : "0x1b2fb1dc5b32934abae1ad1706b0e43513c44e66",\n                  "eventname" : "info"\n               },\n               {\n                  "contract" : "0x1b2fb1dc5b32934abae1ad1706b0e43513c44e66",\n                  "eventname" : "info",\n                  "state" : {\n                     "type" : "Array",\n                     "value" : [\n                        {\n                           "type" : "ByteString",\n                           "value" : "TmV3IHZhbHVlIHdyaXR0ZW4gaW50byBzdG9yYWdl"\n                        }\n                     ]\n                  }\n               }\n            ],\n            "stack" : [\n               {\n                  "type" : "Integer",\n                  "value" : "1"\n               }\n            ],\n            "gasconsumed" : "7233580",\n            "vmstate" : "HALT",\n            "trigger" : "Application"\n         }\n      ]\n   },\n   "id" : 1,\n   "jsonrpc" : "2.0"\n}\n')),(0,r.kt)("p",null,"Pay attention to ",(0,r.kt)("inlineCode",{parentName:"p"},"notifications")," field. It contains messages, which where passed to ",(0,r.kt)("inlineCode",{parentName:"p"},"runtime.Notify")," method.\nThis one contains base64 byte arrays which can be decoded into 3 messages.\nTo decode them just use ",(0,r.kt)("inlineCode",{parentName:"p"},"echo string | base64 -d")," CLI command, e.g.:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ echo VmFsdWUgcmVhZCBmcm9tIHN0b3JhZ2U= | base64 -d\n")),(0,r.kt)("p",null,"which results in:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Value read from storage\n")),(0,r.kt)("p",null,"So, these 3 messages are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Value read from storage")," which was called after we've got the counter value from storage"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Storage key already set. Incrementing by 1")," which was called when we realised that counter value is 0"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"New value written into storage")," which was called after the counter value was put in the storage.")),(0,r.kt)("p",null,"The final part is ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," field. This field contains all returned by the contract values, so here you can see integer value ",(0,r.kt)("inlineCode",{parentName:"p"},"1"),",\nwhich is the counter value denoted to the number of contract invocations."),(0,r.kt)("h4",{id:"step-4-2"},"Step #4"),(0,r.kt)("p",null,"To ensure that all works as expected, let's invoke the contract one more time and check, whether the counter will be incremented: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 1b2fb1dc5b32934abae1ad1706b0e43513c44e66 main\n")),(0,r.kt)("p",null,"... enter the password ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Enter account NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB password >\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction 593a7c887d9d216adb46b322be05b3a0ba4d6be8450f478e3d71c6304189328c\n")),(0,r.kt)("p",null,"To check the counter value, call ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicaionlog")," RPC-call for the invocation transaction:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getapplicationlog", "params": ["593a7c887d9d216adb46b322be05b3a0ba4d6be8450f478e3d71c6304189328c"] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",null,"The JSON result is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "jsonrpc" : "2.0",\n   "id" : 1,\n   "result" : {\n      "executions" : [\n         {\n            "vmstate" : "HALT",\n            "stack" : [\n               {\n                  "value" : "2",\n                  "type" : "Integer"\n               }\n            ],\n            "notifications" : [\n               {\n                  "contract" : "0x1b2fb1dc5b32934abae1ad1706b0e43513c44e66",\n                  "state" : {\n                     "type" : "Array",\n                     "value" : [\n                        {\n                           "type" : "ByteString",\n                           "value" : "VmFsdWUgcmVhZCBmcm9tIHN0b3JhZ2U="\n                        }\n                     ]\n                  },\n                  "eventname" : "info"\n               },\n               {\n                  "eventname" : "info",\n                  "state" : {\n                     "value" : [\n                        {\n                           "value" : "U3RvcmFnZSBrZXkgYWxyZWFkeSBzZXQuIEluY3JlbWVudGluZyBieSAx",\n                           "type" : "ByteString"\n                        }\n                     ],\n                     "type" : "Array"\n                  },\n                  "contract" : "0x1b2fb1dc5b32934abae1ad1706b0e43513c44e66"\n               },\n               {\n                  "state" : {\n                     "value" : [\n                        {\n                           "value" : "TmV3IHZhbHVlIHdyaXR0ZW4gaW50byBzdG9yYWdl",\n                           "type" : "ByteString"\n                        }\n                     ],\n                     "type" : "Array"\n                  },\n                  "contract" : "0x1b2fb1dc5b32934abae1ad1706b0e43513c44e66",\n                  "eventname" : "info"\n               }\n            ],\n            "gasconsumed" : "7233580",\n            "trigger" : "Application"\n         }\n      ],\n      "txid" : "0x593a7c887d9d216adb46b322be05b3a0ba4d6be8450f478e3d71c6304189328c"\n   }\n}\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," field contains now ",(0,r.kt)("inlineCode",{parentName:"p"},"2")," integer value, so the counter was incremented as we expected."),(0,r.kt)("h2",{id:"workshop-part-3"},"Workshop. Part 3"),(0,r.kt)("p",null,"In this part we'll know about NEP5 token standard and try to write, deploy and invoke more complicated smart contract.\nLet\u2019s go!"),(0,r.kt)("h3",{id:"nep17"},"NEP17"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/neo-project/proposals/blob/master/nep-17.mediawiki"},"NEP17")," is a token standard for the Neo blockchain that provides systems with a generalized interaction mechanism for tokenized smart contracts.\nThe example with implementation of all required by the standard methods you can find in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go/blob/master/examples/token/nep17/nep17.go"},"nep17.go")),(0,r.kt)("p",null,"Let's take a view on the example of smart contract with NEP17: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go/blob/master/examples/token/token.go"},"token.go")),(0,r.kt)("p",null,"This smart contract initialises nep17 token interface and takes operation string as a parameter, which is one of:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"symbol")," returns ticker symbol of the token"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"decimals")," returns amount of decimals for the token"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"totalSupply")," returns total token * multiplier"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"balanceOf")," returns the token balance of a specific address and requires additional argument:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"account")," which is requested address"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transfer")," transfers token from one user to another and requires additional arguments:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from")," is account which you'd like to transfer tokens from"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"to")," is account which you'd like to transfer tokens to"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"amount")," is the amount of token to transfer"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data")," is any additional parameter which shall be passed to ",(0,r.kt)("inlineCode",{parentName:"li"},"onNEP17Payment")," method (if the receiver is a contract)\nLet's perform several operations with our contract.")))),(0,r.kt)("h4",{id:"step-1-3"},"Step #1"),(0,r.kt)("p",null,"To compile ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go/blob/master/examples/token/token.go"},"token.go"),"\nyou can use ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go/blob/master/examples/token/token.yml"},"configuration"),"."),(0,r.kt)("p",null,"Compile smart contract:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract compile -i examples/token/token.go -c examples/token/token.yml -m examples/token/token.manifest.json\n")),(0,r.kt)("p",null,"Deploy smart contract:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract deploy -i examples/token/token.nef -manifest examples/token/token.manifest.json -r http://localhost:20331 -w my_wallet.json\n")),(0,r.kt)("p",null,"... enter the password ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Enter account NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB password >\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Contract: 13175d9c27074057cf4d8c50183ce9d4dceaf95c\ne0d85465a2fcfbb5280f068dc22979259d59d0f4d9a871a6de96fc0b92eaa3a5\n\n")),(0,r.kt)("p",null,"Which means that our contract was deployed and now we can invoke it."),(0,r.kt)("h4",{id:"step-2-3"},"Step #2"),(0,r.kt)("p",null,"Let's invoke the contract to perform different operations."),(0,r.kt)("p",null,"To start with, query ",(0,r.kt)("inlineCode",{parentName:"p"},"Symbol")," of the created nep17 token:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 13175d9c27074057cf4d8c50183ce9d4dceaf95c symbol\n")),(0,r.kt)("p",null,"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"13175d9c27074057cf4d8c50183ce9d4dceaf95c")," is our contract hash from step #1"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"symbol")," is operation string which was described earlier and returns token symbol")),(0,r.kt)("p",null,"... and don't forget the password of your account ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty"),"."),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction bd85005d02c383c400595fcefb237a9f0a0919d16f7e0dbe72336c592f1951b6\n")),(0,r.kt)("p",null,"Now, let's take a detailed look at this invocation transaction with ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicationlog")," RPC call:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getapplicationlog", "params": ["bd85005d02c383c400595fcefb237a9f0a0919d16f7e0dbe72336c592f1951b6"] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "result" : {\n      "executions" : [\n         {\n            "notifications" : [],\n            "vmstate" : "HALT",\n            "trigger" : "Application",\n            "stack" : [\n               {\n                  "value" : "QU5U",\n                  "type" : "ByteString"\n               }\n            ],\n            "gasconsumed" : "4294290"\n         }\n      ],\n      "txid" : "0xbd85005d02c383c400595fcefb237a9f0a0919d16f7e0dbe72336c592f1951b6"\n   },\n   "jsonrpc" : "2.0",\n   "id" : 1\n}\n')),(0,r.kt)("p",null,"At least, you can see that ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," field of JSON result is not empty: it contains base64 byte array with the symbol of our token."),(0,r.kt)("p",null,"Following commands able you to get some additional information about token:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 13175d9c27074057cf4d8c50183ce9d4dceaf95c decimals\n$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 13175d9c27074057cf4d8c50183ce9d4dceaf95c totalSupply\n")),(0,r.kt)("h4",{id:"step-3-3"},"Step #3"),(0,r.kt)("p",null,"Now it's time for more interesting things. First of all, let's check the balance of nep17 token on our account by using ",(0,r.kt)("inlineCode",{parentName:"p"},"balanceOf"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 13175d9c27074057cf4d8c50183ce9d4dceaf95c balanceOf NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB\n")),(0,r.kt)("p",null,"... with ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty")," password. The result is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction 84e819e08a05a0709aa5cfc02e613b7aaa4650f324cd37eda4e2941605354498\n")),(0,r.kt)("p",null,"And take a closer look at the transaction's details with ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicationlog")," RPC-call:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getapplicationlog", "params": ["84e819e08a05a0709aa5cfc02e613b7aaa4650f324cd37eda4e2941605354498"] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "result" : {\n      "executions" : [\n         {\n            "stack" : [\n               {\n                  "value" : "0",\n                  "type" : "Integer"\n               }\n            ],\n            "notifications" : [],\n            "trigger" : "Application",\n            "vmstate" : "HALT",\n            "gasconsumed" : "5311140"\n         }\n      ],\n      "txid" : "0x84e819e08a05a0709aa5cfc02e613b7aaa4650f324cd37eda4e2941605354498"\n   },\n   "jsonrpc" : "2.0",\n   "id" : 1\n}\n')),(0,r.kt)("p",null,"As far as ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," field contains integer value ",(0,r.kt)("inlineCode",{parentName:"p"},"0"),", we have no token on the balance. But don't worry about that. Just follow the next step."),(0,r.kt)("h4",{id:"step-4-3"},"Step #4"),(0,r.kt)("p",null,"Before we are able to start using our token (e.g. transfer it to someone else), we have to ",(0,r.kt)("em",{parentName:"p"},"mint")," it.\nIn other words, we should transfer all available amount of token (total supply) to someone's account.\nThere's a special function for this purpose in our contract - ",(0,r.kt)("inlineCode",{parentName:"p"},"Mint")," function. However, this function\nuses ",(0,r.kt)("inlineCode",{parentName:"p"},"CheckWitness")," runtime syscall to check whether the caller of the contract is the owner and authorized\nto manage initial supply of tokens. That's the purpose of transaction's ",(0,r.kt)("em",{parentName:"p"},"signers"),": checking given hash\nagainst the values provided in the list of signers. To pass this check we should add our account to\ntransaction's signers list with CalledByEntry scope. So let's mint token to our address:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 13175d9c27074057cf4d8c50183ce9d4dceaf95c mint NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB -- NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB:CalledByEntry\n")),(0,r.kt)("p",null,"Where:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--")," is a special delimiter of transaction's cosigners list"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB")," is the signer itself (which is our account)")),(0,r.kt)("p",null,"... with ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty")," pass. The result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction 17ceda88c215876c45e2e824cd62639c113f2be235278649024124d8f0213da3\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"getapplicationlog")," RPC-call for this transaction tells us the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "result" : {\n      "txid" : "0x17ceda88c215876c45e2e824cd62639c113f2be235278649024124d8f0213da3",\n      "executions" : [\n         {\n            "trigger" : "Application",\n            "gasconsumed" : "16522950",\n            "vmstate" : "HALT",\n            "notifications" : [\n               {\n                  "contract" : "0x13175d9c27074057cf4d8c50183ce9d4dceaf95c",\n                  "state" : {\n                     "type" : "Array",\n                     "value" : [\n                        {\n                           "type" : "Any"\n                        },\n                        {\n                           "value" : "rtjbO11mTKBL3XvtN5kv+VhWC0E=",\n                           "type" : "ByteString"\n                        },\n                        {\n                           "value" : "1100000000000000",\n                           "type" : "Integer"\n                        }\n                     ]\n                  },\n                  "eventname" : "Transfer"\n               }\n            ],\n            "stack" : [\n               {\n                  "value" : true,\n                  "type" : "Boolean"\n               }\n            ]\n         }\n      ]\n   },\n   "id" : 1,\n   "jsonrpc" : "2.0"\n}\n')),(0,r.kt)("p",null,"Here we have ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," at the ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," field, which means that token was successfully minted.\nLet's just ensure that by querying ",(0,r.kt)("inlineCode",{parentName:"p"},"balanceOf")," one more time:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 13175d9c27074057cf4d8c50183ce9d4dceaf95c balanceOf NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB\n")),(0,r.kt)("p",null,"... with ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty")," pass. The result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction 95fed6e224071b09e885994aa869bee9b3dd815e89cc11b871b4432a35d04b0a\n")),(0,r.kt)("p",null,"... with the following ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicationlog")," JSON message:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "result" : {\n      "executions" : [\n         {\n            "stack" : [\n               {\n                  "value" : "1100000000000000",\n                  "type" : "Integer"\n               }\n            ],\n            "trigger" : "Application",\n            "vmstate" : "HALT",\n            "gasconsumed" : "5557020",\n            "notifications" : []\n         }\n      ],\n      "txid" : "0x95fed6e224071b09e885994aa869bee9b3dd815e89cc11b871b4432a35d04b0a"\n   },\n   "jsonrpc" : "2.0",\n   "id" : 1\n}\n')),(0,r.kt)("p",null,"Now we can see integer value at the ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," field, so ",(0,r.kt)("inlineCode",{parentName:"p"},"1100000000000000")," is the nep17 token balance of our account."),(0,r.kt)("p",null,"Note, that token can be minted only once."),(0,r.kt)("h4",{id:"step-5"},"Step #5"),(0,r.kt)("p",null,"After we are done with minting, it's possible to transfer token to someone else.\nLet's transfer 5 tokens from our account to ",(0,r.kt)("inlineCode",{parentName:"p"},"NgzuJWWGVEwFGsRrgzj8knswEYRJrTe7sm")," with ",(0,r.kt)("inlineCode",{parentName:"p"},"transfer")," call:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 13175d9c27074057cf4d8c50183ce9d4dceaf95c transfer NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB NgzuJWWGVEwFGsRrgzj8knswEYRJrTe7sm 500000000 null -- NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB:CalledByEntry\n")),(0,r.kt)("p",null,"... with password ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty")," and following result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction 5b8c23f4816b67e67e869c4305942fb81041671e70bed6a3888e7493883db8bd\n")),(0,r.kt)("p",null,"Our favourite ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicationlog")," RPC-call tells us:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "result" : {\n      "executions" : [\n         {\n            "vmstate" : "HALT",\n            "notifications" : [\n               {\n                  "contract" : "0x13175d9c27074057cf4d8c50183ce9d4dceaf95c",\n                  "state" : {\n                     "type" : "Array",\n                     "value" : [\n                        {\n                           "type" : "ByteString",\n                           "value" : "rtjbO11mTKBL3XvtN5kv+VhWC0E="\n                        },\n                        {\n                           "type" : "ByteString",\n                           "value" : "50l6vFaauRKm8hPVkr3Aw2CeHQs="\n                        },\n                        {\n                           "type" : "Integer",\n                           "value" : "500000000"\n                        }\n                     ]\n                  },\n                  "eventname" : "Transfer"\n               }\n            ],\n            "trigger" : "Application",\n            "gasconsumed" : "14760950",\n            "stack" : [\n               {\n                  "type" : "Boolean",\n                  "value" : true\n               }\n            ]\n         }\n      ],\n      "txid" : "0x5b8c23f4816b67e67e869c4305942fb81041671e70bed6a3888e7493883db8bd"\n   },\n   "jsonrpc" : "2.0",\n   "id" : 1\n}\n')),(0,r.kt)("p",null,"Note, that ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," field contains ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),", which means that token was successfully transferred.\nLet's now check the balance of ",(0,r.kt)("inlineCode",{parentName:"p"},"NgzuJWWGVEwFGsRrgzj8knswEYRJrTe7sm")," account to ensure that the amount of token on that account = 5:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 13175d9c27074057cf4d8c50183ce9d4dceaf95c balanceOf NgzuJWWGVEwFGsRrgzj8knswEYRJrTe7sm\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicationlog")," RPC-call for this transaction tells us the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "id" : 1,\n   "jsonrpc" : "2.0",\n   "result" : {\n      "executions" : [\n         {\n            "trigger" : "Application",\n            "stack" : [\n               {\n                  "value" : "500000000",\n                  "type" : "Integer"\n               }\n            ],\n            "gasconsumed" : "5557020",\n            "notifications" : [],\n            "vmstate" : "HALT"\n         }\n      ],\n      "txid" : "0x022ade3087cb32fed650b1ab6a799ac9861539308a27f54ba6f38ffde26bd424"\n   }\n}\n')),(0,r.kt)("p",null,"Here we are! There are exactly 5 tokens at the ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," field. You can also ensure that these 5 tokens were debited from ",(0,r.kt)("inlineCode",{parentName:"p"},"NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB")," account by using ",(0,r.kt)("inlineCode",{parentName:"p"},"balanceOf")," method."),(0,r.kt)("h2",{id:"workshop-part-4"},"Workshop. Part 4"),(0,r.kt)("p",null,"In this part we'll summarise our knowledge about smart contracts by investigating ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/4-domain.go"},"4-domain")," smart contract. This contract\ncontains code for domain registration, transferring, deletion and getting information about registered domains."),(0,r.kt)("p",null,"Let\u2019s go!"),(0,r.kt)("h4",{id:"step-1-4"},"Step #1"),(0,r.kt)("p",null,"Let's take a glance at our ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/4-domain.go"},"contract")," and inspect it. The contract takes an action string as the first parameter, which is one of the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"register")," checks, whether domain with the specified name already exists. If not, it also adds the pair ",(0,r.kt)("inlineCode",{parentName:"p"},"[domainName, owner]")," to the storage. It requires additional arguments:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"domainName")," which is the new domain name."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"owner")," - the 34-digit account address from our ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/my_wallet.json"},"wallet"),", which will be used for contract invocation."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"query")," returns the specified domain owner address (or false, if no such domain was registered). It requires the following argument:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"domainName")," which is requested domain name."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"transfer")," transfers domain with the specified name to the other address (of course, in case if you're the actual owner of the domain requested). It requires additional arguments:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"domainName")," which is the name of domain you'd like to transfer."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"toAddress")," - the account address you'd like to transfer the specified domain to."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"delete")," deletes the specified domain from the storage. The arguments:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"domainName")," which is the name of the domain you'd like to delete.")),(0,r.kt)("p",{parentName:"li"},"In the next steps we'll compile and deploy smart contract.\nAfter that we'll try to register new domain, transfer it to another account and query information about it."))),(0,r.kt)("h4",{id:"step-2-4"},"Step #2"),(0,r.kt)("p",null,"Compile smart contract ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/4-domain.go"},"4-domain.go")," with ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/4-domain.yml"},"configuration")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract compile -i 4-domain.go -c 4-domain.yml -m 4-domain.manifest.json\n")),(0,r.kt)("p",null,"... and deploy it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract deploy -i 4-domain.nef --manifest 4-domain.manifest.json -r http://localhost:20331 -w my_wallet.json\n")),(0,r.kt)("p",null,"Just a note: our contract uses storage and, as the previous one, needs the flag ",(0,r.kt)("inlineCode",{parentName:"p"},"hasstorage")," to be set to ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," value.\nThat can be done in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nspcc-dev/neo-go-sc-wrkshp/blob/master/4-domain.yml"},"configuration")," file."),(0,r.kt)("p",null,"... enter the password ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Enter account NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB password >\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Contract: 5e6d360e472798ee10c676022761bc5a2c3828f5\na84ea858045b498b73319d8acdf0f95c9bdba4227b0999006176c0136306b80f\n")),(0,r.kt)("p",null,"You know, what it means :)"),(0,r.kt)("h4",{id:"step-3-4"},"Step #3"),(0,r.kt)("p",null,"Invoke the contract to register domain with name ",(0,r.kt)("inlineCode",{parentName:"p"},"my_first_domain"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 5e6d360e472798ee10c676022761bc5a2c3828f5 register my_first_domain NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB -- NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB:CalledByEntry\n")),(0,r.kt)("p",null,"... the strongest password in the world, guess: ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Enter account NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB password >\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction a7f868e07898592de9846549b4395190dfe7efbbdd521178c2b72d96c25dd831\n")),(0,r.kt)("p",null,"Also you can see the log message in the console, where you run neo-go node:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'2020-12-17T17:31:43.480+0300    INFO    runtime log {"tx": "a7f868e07898592de9846549b4395190dfe7efbbdd521178c2b72d96c25dd831", "script": "5e6d360e472798ee10c676022761bc5a2c3828f5", "msg": "RegisterDomain: my_first_domain"}\n')),(0,r.kt)("p",null,"Well, that's ok. Let's check now, whether our domain was registered with ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicationlog")," RPC-call:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getapplicationlog", "params": ["a7f868e07898592de9846549b4395190dfe7efbbdd521178c2b72d96c25dd831"] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",null,"The result is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "jsonrpc" : "2.0",\n   "result" : {\n      "txid" : "0xa7f868e07898592de9846549b4395190dfe7efbbdd521178c2b72d96c25dd831",\n      "executions" : [\n         {\n            "stack" : [\n               {\n                  "type" : "Boolean",\n                  "value" : true\n               }\n            ],\n            "gasconsumed" : "9143210",\n            "trigger" : "Application",\n            "notifications" : [\n               {\n                  "contract" : "0x5e6d360e472798ee10c676022761bc5a2c3828f5",\n                  "eventname" : "registered",\n                  "state" : {\n                     "type" : "Array",\n                     "value" : [\n                        {\n                           "value" : "rtjbO11mTKBL3XvtN5kv+VhWC0E=",\n                           "type" : "ByteString"\n                        },\n                        {\n                           "type" : "ByteString",\n                           "value" : "bXlfZmlyc3RfZG9tYWlu"\n                        }\n                     ]\n                  }\n               }\n            ],\n            "vmstate" : "HALT"\n         }\n      ]\n   },\n   "id" : 1\n}\n')),(0,r.kt)("p",null,"Especially, we're interested in two fields of the json:"),(0,r.kt)("p",null,"First one is ",(0,r.kt)("inlineCode",{parentName:"p"},"notifications")," field, which contains one notification with ",(0,r.kt)("inlineCode",{parentName:"p"},"registered")," name:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"bXlfZmlyc3RfZG9tYWlu")," byte string in base64 representation, which can be decoded to ",(0,r.kt)("inlineCode",{parentName:"li"},"my_first_domain")," - our domain's name"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ecv/0NH0e0cStm0wWBgjCxMyaok=")," byte array, which can be decoded to the account address ",(0,r.kt)("inlineCode",{parentName:"li"},"NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB"),".")),(0,r.kt)("p",null,"The second field is ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," with ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," value, which was returned by the smart contract."),(0,r.kt)("p",null,"All of these values let us be sure that our domain was successfully registered.  "),(0,r.kt)("h4",{id:"step-4-4"},"Step #4"),(0,r.kt)("p",null,"Invoke the contract to query the address information our ",(0,r.kt)("inlineCode",{parentName:"p"},"my_first_domain")," domain:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 5e6d360e472798ee10c676022761bc5a2c3828f5 query my_first_domain\n")),(0,r.kt)("p",null,"... the pass ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Enter account NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB password >\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction b8b1e8e473437badfad13355c65da6bcd1e868bd30fbedfcd8f9fd5daef52bfb\n")),(0,r.kt)("p",null,"and log-message:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'2020-12-17T17:39:32.677+0300    INFO    runtime log {"tx": "7693ddedee55e1ccf2914a049d3cf5c3d1b29d5fb8ecbd3e9bd5672a242170a6", "script": "5e6d360e472798ee10c676022761bc5a2c3828f5", "msg": "QueryDomain: my_first_domain"}\n')),(0,r.kt)("p",null,"Let's check this transaction with ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicationlog")," RPC call:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getapplicationlog", "params": ["b8b1e8e473437badfad13355c65da6bcd1e868bd30fbedfcd8f9fd5daef52bfb"] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",null,"... which gives us the following result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "jsonrpc" : "2.0",\n   "id" : 1,\n   "result" : {\n      "txid" : "0xb8b1e8e473437badfad13355c65da6bcd1e868bd30fbedfcd8f9fd5daef52bfb",\n      "executions" : [\n         {\n            "vmstate" : "HALT",\n            "stack" : [\n               {\n                  "type" : "ByteString",\n                  "value" : "rtjbO11mTKBL3XvtN5kv+VhWC0E="\n               }\n            ],\n            "gasconsumed" : "4321230",\n            "trigger" : "Application",\n            "notifications" : []\n         }\n      ]\n   }\n}\n')),(0,r.kt)("p",null,"with base64 interpretation of our account address ",(0,r.kt)("inlineCode",{parentName:"p"},"NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB")," on the stack, which means that domain ",(0,r.kt)("inlineCode",{parentName:"p"},"my_first_domain")," was registered by the owner with received account address."),(0,r.kt)("h4",{id:"step-5-1"},"Step #5"),(0,r.kt)("p",null,"Invoke the contract to transfer domain to the other account (e.g. account with ",(0,r.kt)("inlineCode",{parentName:"p"},"NgzuJWWGVEwFGsRrgzj8knswEYRJrTe7sm")," address):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 5e6d360e472798ee10c676022761bc5a2c3828f5 transfer my_first_domain NgzuJWWGVEwFGsRrgzj8knswEYRJrTe7sm -- NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB\n")),(0,r.kt)("p",null,"... the password: ",(0,r.kt)("inlineCode",{parentName:"p"},"qwerty")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Enter account NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB password >\n")),(0,r.kt)("p",null,"Result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Sent invocation transaction c1a97f8263cfea75ea27b31b53a4a2088d4a0f48d03c9967f92aa96fbf74a603\n")),(0,r.kt)("p",null,"and log-message:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'2020-12-17T17:44:07.536+0300    INFO    runtime log {"tx": "5d06117399a2ffc35d1f4a16fc16de7ab5136406b16dbfb8cda033d31cb59bcc", "script": "5e6d360e472798ee10c676022761bc5a2c3828f5", "msg": "TransferDomain: my_first_domain"}\n')),(0,r.kt)("p",null,"Perfect. And ",(0,r.kt)("inlineCode",{parentName:"p"},"getapplicationlog")," RPC-call..."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -d \'{ "jsonrpc": "2.0", "id": 1, "method": "getapplicationlog", "params": ["c1a97f8263cfea75ea27b31b53a4a2088d4a0f48d03c9967f92aa96fbf74a603"] }\' localhost:20331 | json_pp\n')),(0,r.kt)("p",null,"... tells us:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "id" : 1,\n   "jsonrpc" : "2.0",\n   "result" : {\n      "executions" : [\n         {\n            "stack" : [\n               {\n                  "value" : true,\n                  "type" : "Boolean"\n               }\n            ],\n            "gasconsumed" : "7680110",\n            "vmstate" : "HALT",\n            "trigger" : "Application",\n            "notifications" : [\n               {\n                  "eventname" : "deleted",\n                  "state" : {\n                     "value" : [\n                        {\n                           "type" : "ByteString",\n                           "value" : "rtjbO11mTKBL3XvtN5kv+VhWC0E="\n                        },\n                        {\n                           "type" : "ByteString",\n                           "value" : "bXlfZmlyc3RfZG9tYWlu"\n                        }\n                     ],\n                     "type" : "Array"\n                  },\n                  "contract" : "0x5e6d360e472798ee10c676022761bc5a2c3828f5"\n               },\n               {\n                  "state" : {\n                     "value" : [\n                        {\n                           "value" : "50l6vFaauRKm8hPVkr3Aw2CeHQs=",\n                           "type" : "ByteString"\n                        },\n                        {\n                           "type" : "ByteString",\n                           "value" : "bXlfZmlyc3RfZG9tYWlu"\n                        }\n                     ],\n                     "type" : "Array"\n                  },\n                  "contract" : "0x5e6d360e472798ee10c676022761bc5a2c3828f5",\n                  "eventname" : "registered"\n               }\n            ]\n         }\n      ],\n      "txid" : "0xc1a97f8263cfea75ea27b31b53a4a2088d4a0f48d03c9967f92aa96fbf74a603"\n   }\n}\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"notifications")," field contains two events:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"First one with name ",(0,r.kt)("inlineCode",{parentName:"li"},"deleted")," and additional information (domain ",(0,r.kt)("inlineCode",{parentName:"li"},"my_first_domain")," was deleted from account ",(0,r.kt)("inlineCode",{parentName:"li"},"NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB"),"),"),(0,r.kt)("li",{parentName:"ul"},"Second one with name ",(0,r.kt)("inlineCode",{parentName:"li"},"registered"),"  and additional information  (domain ",(0,r.kt)("inlineCode",{parentName:"li"},"my_first_domain")," was registered with account ",(0,r.kt)("inlineCode",{parentName:"li"},"NgzuJWWGVEwFGsRrgzj8knswEYRJrTe7sm"),").\nThe ",(0,r.kt)("inlineCode",{parentName:"li"},"stack")," field contains ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," value, which means that our domain was successfully transferred.")),(0,r.kt)("h4",{id:"step-6"},"Step #6"),(0,r.kt)("p",null,"The last call is ",(0,r.kt)("inlineCode",{parentName:"p"},"delete"),", so you can try to create the other domain, e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"my_second_domain")," and then remove it from storage with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 5e6d360e472798ee10c676022761bc5a2c3828f5 register my_second_domain NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB -- NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB:CalledByEntry\n$ ./bin/neo-go contract invokefunction -r http://localhost:20331 -w my_wallet.json 5e6d360e472798ee10c676022761bc5a2c3828f5 delete my_second_domain -- NbrUYaZgyhSkNoRo9ugRyEMdUZxrhkNaWB\n")),(0,r.kt)("p",null,"Thank you!"),(0,r.kt)("h3",{id:"useful-links"},"Useful links"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://medium.com/@neospcc/%D1%81%D0%BC%D0%B0%D1%80%D1%82-%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%B0%D0%BA%D1%82-%D0%B4%D0%BB%D1%8F-neo-769139352b65"},"Our basic tutorial on Medium")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://medium.com/@neospcc/neogo-adds-support-for-neo-blockchain-toolkit-673ea914f661"},"Using NEO Blockchain Toolkit")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.neo.org/"},"NEO documentation")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/neo-project/neo/"},"NEO github")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/nspcc-dev/neo-go"},"NEO-GO github"))))}m.isMDXComponent=!0},25841:function(e,t,n){t.Z=n.p+"assets/images/cover-ed3534c7b8442d81bcf99e9864b629e1.png"},48178:function(e,t,n){t.Z=n.p+"assets/images/neo_color_dark_gopher-a409789b44d750f7c8e0db1acd41ab08.png"},80997:function(e,t,n){t.Z=n.p+"assets/images/node-f699eca6216bd73d548a6c82b382fbf8.png"}}]);