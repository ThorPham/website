"use strict";(self.webpackChunkneo_dev_portal=self.webpackChunkneo_dev_portal||[]).push([[1048],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=s(n),m=r,h=u["".concat(c,".").concat(m)]||u[m]||p[m]||a;return n?o.createElement(h,i(i({ref:t},d),{},{components:n})):o.createElement(h,i({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<a;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},33777:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return d},default:function(){return u}});var o=n(87462),r=n(63366),a=(n(67294),n(3905)),i=["components"],l={},c="Deploying Smart Contracts",s={unversionedId:"n3/develop/deploy/deploy",id:"n3/develop/deploy/deploy",isDocsHomePage:!1,title:"Deploying Smart Contracts",description:"When a smart contract is deployed on the blockchain, it can be used by other users or invoked by other contracts. This section describes how to deploy and invoke the smart contract in the Neo blockchain using Neo-CLI or Neo-GUI. The instructions in this section are generic and applicable to all contract types including NEP-17 assets.",source:"@site/docs/n3/develop/deploy/deploy.md",sourceDirName:"n3/develop/deploy",slug:"/n3/develop/deploy/deploy",permalink:"/website/docs/n3/develop/deploy/deploy",editUrl:"https://github.com/neo-project/neo-dev-portal/blob/master/docs/n3/develop/deploy/deploy.md",tags:[],version:"current",lastUpdatedBy:"Apisit Toompkadee",frontMatter:{},sidebar:"docs",previous:{title:"Contract Update and Destroy",permalink:"/website/docs/n3/develop/write/update"},next:{title:"Invoking Smart Contracts",permalink:"/website/docs/n3/develop/deploy/invoke"}},d=[{value:"What contracts need to be deployed?",id:"what-contracts-need-to-be-deployed",children:[{value:"How to deploy?",id:"how-to-deploy",children:[]}]},{value:"Before you start",id:"before-you-start",children:[]},{value:"Deploying contract with Neo-CLI",id:"deploying-contract-with-neo-cli",children:[{value:"Example",id:"example",children:[]},{value:"The contract scripthash",id:"the-contract-scripthash",children:[]},{value:"Common errors",id:"common-errors",children:[]}]},{value:"Deploying contracts with Neo-GUI",id:"deploying-contracts-with-neo-gui",children:[]}],p={toc:d};function u(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"deploying-smart-contracts"},"Deploying Smart Contracts"),(0,a.kt)("p",null,"When a smart contract is deployed on the blockchain, it can be used by other users or invoked by other contracts. This section describes how to deploy and invoke the smart contract in the Neo blockchain using Neo-CLI or Neo-GUI. The instructions in this section are generic and applicable to all contract types including NEP-17 assets. "),(0,a.kt)("h2",{id:"what-contracts-need-to-be-deployed"},"What contracts need to be deployed?"),(0,a.kt)("p",null,"When a smart contract needs to store data or to be invoked by another smart contract  through syscall ",(0,a.kt)("inlineCode",{parentName:"p"},"System.Contract.Call")," on the blockchain, it needs to be deployed. Contracts triggered only by the verification trigger, such as the lock contract and multi-signature contract, do not need to be deployed as they will not be invoked by other contracts. Contracts such as  ",(0,a.kt)("inlineCode",{parentName:"p"},"return 1+1"),"  do not need to be deployed as they do not require any input parameters."),(0,a.kt)("p",null,"From the programming language perspective, only when a smart contract will be used as a class library, it needs to be deployed. For example: "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"When a smart contract has variable incoming parameters, it must serve as a storage. The caller or other smart contracts provide the parameters."),(0,a.kt)("li",{parentName:"ul"},"When a smart contract uses storage it must serve as a class library."),(0,a.kt)("li",{parentName:"ul"},"When a smart contract implements NEP-17 standard assets, the contract needs to be deployed on the blockchain.")),(0,a.kt)("h3",{id:"how-to-deploy"},"How to deploy?"),(0,a.kt)("p",null,"Smart contracts are deployed by invoking APIs. Usually we use Neo-CLI or Neo-GUI to deploy smart contracts. "),(0,a.kt)("p",null,"Deploying and invoking smart contracts cost fees. For more information, refer to ",(0,a.kt)("a",{parentName:"p",href:"../../reference/fees.md"},"Fees"),"."),(0,a.kt)("h2",{id:"before-you-start"},"Before you start"),(0,a.kt)("p",null,"Make sure you have done the following:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Confirmed that your contract should be deployed. "),(0,a.kt)("li",{parentName:"ul"},"Compiled a contract file (","*",".nef) and a descriptive file of contract (","*",".manifest.json)."),(0,a.kt)("li",{parentName:"ul"},"Installed Neo-CLI or Neo-GUI and completed block synchronization. For more information, refer to  ",(0,a.kt)("a",{parentName:"li",href:"/website/docs/n3/node/cli/setup"},"Neo-CLI")," and ",(0,a.kt)("a",{parentName:"li",href:"/website/docs/n3/node/gui/install"},"Neo-GUI"))),(0,a.kt)("h2",{id:"deploying-contract-with-neo-cli"},"Deploying contract with Neo-CLI"),(0,a.kt)("p",null,"In Neo-CLI run the following command to deploy your contract:"),(0,a.kt)("p",null," ",(0,a.kt)("inlineCode",{parentName:"p"},"deploy <nefFilePath> [manifestFile]")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"<nefFilePath>")," : mandatory. The contract file"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[manifestFile]")," : optional. The descriptive file of contract")),(0,a.kt)("h3",{id:"example"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"deploy NEP17.nef\n")),(0,a.kt)("p",null,"or"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"deploy NEP17.nef NEP17.manifest.json\n")),(0,a.kt)("p",null,"After the command is executed, the program deploys the smart contract and pays the fee automatically."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"neo> deploy NEP17.nef\nContract hash: 0xb7f4d011241ec13db16c0e3484bdd5dd9a536f26\nGas consumed: 10.0107577\nNetwork fee: 0.0345352\nTotal fee: 10.0452929 GAS\nRelay tx? (no|yes): yes\n\nSigned and relayed transaction with hash=0xe03aade81fb96c44e115a1cc9cfe984a9df4a283bd10aa0aefa7ebf3e296f757\n")),(0,a.kt)("h3",{id:"the-contract-scripthash"},"The contract scripthash"),(0,a.kt)("p",null,"When a contract has been deployed a scripthash is generated as a unified identifier of the contract. The contract scripthash can be converted into the standard 20-byte address for receiving assets from transfer transactions. In that case the contract scripthash is used in big endian format. For example:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Contract ScriptHash (big endian): 0xb7f4d011241ec13db16c0e3484bdd5dd9a536f26 ")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Corresponding address: NPRCE9me1CdXBA6StQ7kff52p61rHQqnS7"))),(0,a.kt)("h3",{id:"common-errors"},"Common errors"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Engine faulted")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Contract already exists"),(0,a.kt)("li",{parentName:"ul"},".nef  is not matched with .manifest"),(0,a.kt)("li",{parentName:"ul"},"either .nef or .manifest is wrong"),(0,a.kt)("li",{parentName:"ul"},"Insufficient fee")),(0,a.kt)("h2",{id:"deploying-contracts-with-neo-gui"},"Deploying contracts with Neo-GUI"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"In Neo-GUI click ",(0,a.kt)("inlineCode",{parentName:"li"},"Contract")," -> ",(0,a.kt)("inlineCode",{parentName:"li"},"Deploy Contract"),"\u3002"),(0,a.kt)("li",{parentName:"ol"},"Select the desired ",(0,a.kt)("em",{parentName:"li"},".nef and "),".manifest.json files."),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"Deploy"),".")))}u.isMDXComponent=!0}}]);