"use strict";(self.webpackChunkneo_dev_portal=self.webpackChunkneo_dev_portal||[]).push([[97],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=s(n),m=a,f=d["".concat(c,".").concat(m)]||d[m]||p[m]||l;return n?r.createElement(f,o(o({ref:t},u),{},{components:n})):r.createElement(f,o({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var s=2;s<l;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},58215:function(e,t,n){var r=n(67294);t.Z=function(e){var t=e.children,n=e.hidden,a=e.className;return r.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}},55064:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(67294),a=n(79443);var l=function(){var e=(0,r.useContext)(a.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},o=n(86010),i="tabItem_1uMI",c="tabItemActive_2DSg";var s=function(e){var t,n=e.lazy,a=e.block,s=e.defaultValue,u=e.values,p=e.groupId,d=e.className,m=r.Children.toArray(e.children),f=null!=u?u:m.map((function(e){return{value:e.props.value,label:e.props.label}})),w=null!=s?s:null==(t=m.find((function(e){return e.props.default})))?void 0:t.props.value,h=l(),v=h.tabGroupChoices,g=h.setTabGroupChoices,k=(0,r.useState)(w),y=k[0],N=k[1],b=[];if(null!=p){var E=v[p];null!=E&&E!==y&&f.some((function(e){return e.value===E}))&&N(E)}var x=function(e){var t=e.currentTarget,n=b.indexOf(t),r=f[n].value;N(r),null!=p&&(g(p,r),setTimeout((function(){var e,n,r,a,l,o,i,s;(e=t.getBoundingClientRect(),n=e.top,r=e.left,a=e.bottom,l=e.right,o=window,i=o.innerHeight,s=o.innerWidth,n>=0&&l<=s&&a<=i&&r>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(c),setTimeout((function(){return t.classList.remove(c)}),2e3))}),150))},P=function(e){var t,n=null;switch(e.key){case"ArrowRight":var r=b.indexOf(e.target)+1;n=b[r]||b[0];break;case"ArrowLeft":var a=b.indexOf(e.target)-1;n=b[a]||b[b.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},d)},f.map((function(e){var t=e.value,n=e.label;return r.createElement("li",{role:"tab",tabIndex:y===t?0:-1,"aria-selected":y===t,className:(0,o.Z)("tabs__item",i,{"tabs__item--active":y===t}),key:t,ref:function(e){return b.push(e)},onKeyDown:P,onFocus:x,onClick:x},null!=n?n:t)}))),n?(0,r.cloneElement)(m.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},m.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==y})}))))}},82924:function(e,t,n){var r=n(67294).createContext(void 0);t.Z=r},79443:function(e,t,n){var r=(0,n(67294).createContext)(void 0);t.Z=r},85350:function(e,t,n){var r=n(67294),a=n(82924);t.Z=function(){var e=(0,r.useContext)(a.Z);if(null==e)throw new Error('"useThemeContext" is used outside of "Layout" component. Please see https://docusaurus.io/docs/api/themes/configuration#usethemecontext.');return e}},20245:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var r=n(87462),a=n(63366),l=(n(67294),n(3905)),o=(n(16213),n(55064),n(58215),["components"]),i={title:"Wallets",date:new Date("2022-01-18T21:13:48.000Z")},c=void 0,s={unversionedId:"n3/Advances/neofs/topics/wallets",id:"n3/Advances/neofs/topics/wallets",isDocsHomePage:!1,title:"Wallets",description:"Almost everything you may want to do with NeoFS will require access to a wallet. Here are a few handy ways to get a wallet",source:"@site/docs/n3/Advances/neofs/topics/wallets.mdx",sourceDirName:"n3/Advances/neofs/topics",slug:"/n3/Advances/neofs/topics/wallets",permalink:"/website/docs/n3/Advances/neofs/topics/wallets",editUrl:"https://github.com/neo-project/neo-dev-portal/blob/master/docs/n3/Advances/neofs/topics/wallets.mdx",tags:[],version:"current",lastUpdatedBy:"Celia18305",frontMatter:{title:"Wallets",date:"2022-01-18T21:13:48.000Z"},sidebar:"docs",previous:{title:"Tokens",permalink:"/website/docs/n3/Advances/neofs/topics/tokens"},next:{title:"NeoNS",permalink:"/website/docs/n3/Advances/neons/index"}},u=[{value:"Imports",id:"imports",children:[]},{value:"Create a new wallet",id:"create-a-new-wallet",children:[{value:"Retrieving the private key from a wallet",id:"retrieving-the-private-key-from-a-wallet",children:[]}]},{value:"Retrieving wallet balances",id:"retrieving-wallet-balances",children:[{value:"Transferring NEP-17 tokens",id:"transferring-nep-17-tokens",children:[]}]},{value:"NeoFS Balance",id:"neofs-balance",children:[]}],p={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,o);return(0,l.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Almost everything you may want to do with NeoFS will require access to a wallet. Here are a few handy ways to get a wallet"),(0,l.kt)("h2",{id:"imports"},"Imports"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'import (\n    "github.com/nspcc-dev/neo-go/pkg/rpc/client"\n    "github.com/nspcc-dev/neo-go/pkg/wallet"    \n)\n')),(0,l.kt)("h4",{id:"retrieve-from-a-nep-6-file-json-format"},"Retrieve from a NEP-6 file (json format)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'w, err := wallet.NewWalletFromFile(path)\nif err != nil {\n  return fmt.Errorf("can\'t read the wallet: %w", err)\n}\n')),(0,l.kt)("h2",{id:"create-a-new-wallet"},"Create a new wallet"),(0,l.kt)("p",null,"This wallet has no password but is the simplest form of wallet that you can generate"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'acc, err := wallet.NewAccount() //generates a new private key\nif err != nil {\n    return &wallet.Wallet{}, err\n}\nw, err := wallet.NewWallet(path)\nif err != nil {\n    return fmt.Errorf("can\'t create the wallet: %w", err)\n}\nw.AddAccount(acc)\n')),(0,l.kt)("h4",{id:"a-slighty-more-secure-wallet-with-a-password"},"A slighty more secure wallet... with a password"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'w, err := wallet.NewWallet(path)\nw.CreateAccount(name, password)\nif err != nil {\n    return fmt.Errorf("can\'t create the wallet: %w", err)\n}\n')),(0,l.kt)("h3",{id:"retrieving-the-private-key-from-a-wallet"},"Retrieving the private key from a wallet"),(0,l.kt)("p",null,"Sometimes for specific actions you will need the private key of the wallet. If you have the password you can extract the private key"),(0,l.kt)("p",null,"Notice this ",(0,l.kt)("inlineCode",{parentName:"p"},"decrypts"),' the wallet. At this point the wallet is considered "unlocked". Sometimes you may find you are performing an action on a walelt and the error is it is locked.\nThe result of decrypting is unlocking the wallet.'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'addr := w.GetChangeAddress() //get the default wallet\nacc := w.GetAccount(addr)\nif acc == nil {\n  return nil, fmt.Errorf("invalid wallet address %s: %w", addrStr, err)\n}\n\nif err := acc.Decrypt(password, keys.NEP2ScryptParams()); err != nil {\n    return nil, errors.New("[decrypt] invalid password - " + err.Error())\n}\nprivateKey := &acc.PrivateKey().PrivateKey\n')),(0,l.kt)("h2",{id:"retrieving-wallet-balances"},"Retrieving wallet balances"),(0,l.kt)("p",null,"Often you will want to know the balances on a wallet. There is a potential minor confusion at this stage.\nNeo N3 wallets store NEP-17 coins. Both Neo and Gas are NEP 17 currencies, however any currency you or someone else may make could also be a NEP-17 currency. There are other standards such as NEP-11 and the difference I will leave to you to read about."),(0,l.kt)("p",null,"However, NeoFS has a smart contract in which you need to transfer Gas to, so that you can pay for NeoFS storage space. This balance won't show up in your wallet balance."),(0,l.kt)("p",null,"To retrieve you wallet's NEP-17 balances you will need to create a wallet client. "),(0,l.kt)("p",null,"You will need"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"A wallet address you want to get the balances of ")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'cli, err := client.New(ctx, "http://seed1t4.neo.org:20332", client.Options{})\nif err != nil {\n    return fmt.Errorf("can\'t create the client: %w", err)\n}\nerr = cli.Init()\nif err != nil {\n    return fmt.Errorf("can\'t init the client: %w", err)\n}\nrecipient, err := helper.StringToUint160(walletAddress)\nif err != nil {\n    return fmt.Errorf("can\'t convert the wallet address: %w", err)\n}\nbalances, err := cli.GetNEP17Balances(recipient)\nif err != nil {\nreturn fmt.Errorf("can\'t retrieve the balances: %w", err)\n}\nfmt.Printf("balances %+v\\r\\n", balances)\n')),(0,l.kt)("h3",{id:"transferring-nep-17-tokens"},"Transferring NEP-17 tokens"),(0,l.kt)("p",null,"A major part of blockchain technology is to be able to transfer tokens to other wallets (including sending GAS to the NeoFS smart contract)."),(0,l.kt)("p",null,"You will need"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"An unlocked wallet ",(0,l.kt)("inlineCode",{parentName:"li"},"myWallet")),(0,l.kt)("li",{parentName:"ol"},"A wallet to send Nep17 to ",(0,l.kt)("inlineCode",{parentName:"li"},"walletTo")),(0,l.kt)("li",{parentName:"ol"},"The amount you would like to send (as an int64 - no decimals in blockchain remember!)"),(0,l.kt)("li",{parentName:"ol"},"The token you would like to send. To retrieve the token, you need the token name to get the contract hash")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"gasToken, err := cli.GetNativeContractHash(nativenames.Gas)\nif err != nil {\n  log.Fatal(err)\n}\n")),(0,l.kt)("p",null,"then"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'ctx := context.Background()\n// use endpoint addresses of public RPC nodes, e.g. from https://dora.coz.io/monitor\ncli, err := client.New(ctx, "http://seed1t4.neo.org:20332", client.Options{})\nif err != nil {\n  return util.Uint256{}, err\n}\nerr = cli.Init()\nif err != nil {\n  return util.Uint256{}, err\n}\nrecipient, err := helper.StringToUint160(walletTo)\nif err != nil {\n  return util.Uint256{}, err\n}\ntxHash, err := cli.TransferNEP17(myWallet, recipient, gasToken, amount, 0, nil, nil)\nle := txHash.StringLE()\nreturn txHash, err\n')),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"the txHash is reversed in its uint256 state. You need to reverse it so that it matches the txHashes you would find in a blockchain explorer for instance, hence the ",(0,l.kt)("inlineCode",{parentName:"p"},"le := txHash.StringLE()")))),(0,l.kt)("h2",{id:"neofs-balance"},"NeoFS Balance"),(0,l.kt)("p",null,"However this balance as I mentioned, does not include your NeoFS balance. For that you need a NeoFS client"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'import (\n    "github.com/nspcc-dev/neofs-sdk-go/client"\n)\n')),(0,l.kt)("p",null,"Once you have this, you can now retrieve your NeoFS balance"),(0,l.kt)("p",null,"You will need"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Private key"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"/docs/n3/neofs/topics/clients"},"NeoFS client")," (",(0,l.kt)("inlineCode",{parentName:"li"},"cli"),")")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'w, err := owner.NEO3WalletFromPublicKey(&key.PublicKey)\nif err != nil {\n    fmt.Errorf("couldn\'t create wallet from public key: %w", err)\n}\nid := owner.NewIDFromNeo3Wallet(w)\nctx := context.Background()\nneoFSBalance, err := cli.GetBalance(ctx, id)\nfmt.Printf("neofs balance %+v\\r\\n", neoFSBalance)\n')))}d.isMDXComponent=!0}}]);