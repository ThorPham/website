"use strict";(self.webpackChunkneo_dev_portal=self.webpackChunkneo_dev_portal||[]).push([[3600],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,h=d["".concat(c,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},25008:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return p},default:function(){return d}});var a=n(87462),r=n(63366),i=(n(67294),n(3905)),o=["components"],s={},c="invokefunction Method",l={unversionedId:"n3/reference/rpc/latest-version/api/invokefunction",id:"n3/reference/rpc/latest-version/api/invokefunction",isDocsHomePage:!1,title:"invokefunction Method",description:"Invokes a smart contract with its scripthash based on the specified operation and parameters and returns the result.",source:"@site/docs/n3/reference/rpc/latest-version/api/invokefunction.md",sourceDirName:"n3/reference/rpc/latest-version/api",slug:"/n3/reference/rpc/latest-version/api/invokefunction",permalink:"/website/docs/n3/reference/rpc/latest-version/api/invokefunction",editUrl:"https://github.com/neo-project/neo-dev-portal/blob/master/docs/n3/reference/rpc/latest-version/api/invokefunction.md",tags:[],version:"current",lastUpdatedBy:"Apisit Toompkadee",frontMatter:{},sidebar:"docs",previous:{title:"invokecontractverify Method",permalink:"/website/docs/n3/reference/rpc/latest-version/api/invokecontractverify"},next:{title:"invokescript Method",permalink:"/website/docs/n3/reference/rpc/latest-version/api/invokescript"}},p=[{value:"Parameter Description",id:"parameter-description",children:[]},{value:"Example",id:"example",children:[]},{value:"About iterator",id:"about-iterator",children:[]}],u={toc:p};function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"invokefunction-method"},"invokefunction Method"),(0,i.kt)("p",null,"Invokes a smart contract with its scripthash based on the specified operation and parameters and returns the result."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"This method is used to test your VM script as if they ran on the blockchain at that point in time. This RPC call does not affect the blockchain in any way.")))),(0,i.kt)("blockquote",null,(0,i.kt)("ul",{parentName:"blockquote"},(0,i.kt)("li",{parentName:"ul"},"You must install the plugin ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/neo-project/neo-modules/releases"},"RpcServer")," before you can invoke the method."))),(0,i.kt)("h2",{id:"parameter-description"},"Parameter Description"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"scripthash: Smart contract scripthash. You need to use the proper byte order of the address passed according to its data type. If the data type is Hash160, use the big endian scripthash; if the data type is ByteArray, use the little endian scripthash.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"operation: The operation name (string)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"params: Optional. The parameters to be passed into the smart contract operation")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"signers: Optional. List of contract signature accounts."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"account: signature account"),(0,i.kt)("li",{parentName:"ul"},"scopes: signature's valid scopes, allowed values are:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"None: Only transactions are signed and no contracts are allowed to use this signature."),(0,i.kt)("li",{parentName:"ul"},"CalledByEntry: It only applies to the chain call entry. That is,  if the user invokes contract A, and then contract A calls contract B, only contract A can use the signature. It is recommended as the default value for the wallet."),(0,i.kt)("li",{parentName:"ul"},"CustomContracts: Custom contract. The signature can be used in the specified contract.\nIt can be used in conjunction with CalledByEntry."),(0,i.kt)("li",{parentName:"ul"},"CustomGroups: Custom contract groups that can be used in a specified contract group.\nIt can be used in conjunction with CalledByEntry."),(0,i.kt)("li",{parentName:"ul"},"Global: Global. Global. The risk is extremely high because the contract may transfer all assets in the address. Only choose it when the contract is extremely trusted."))),(0,i.kt)("li",{parentName:"ul"},"allowedcontracts: contracts of the signature can take effect, if scopes is CustomContracts"),(0,i.kt)("li",{parentName:"ul"},"allowedgroups: pubkeys of the signature can take effect, if scopes is CustomGroups",(0,i.kt)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"}," You need to use the proper byte order of the address passed according to its data type. If the data type is Hash160, use the big endian script hash; if the data type is ByteArray, use the little endian scripthash."))))))),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "String",\n  "value": "Hello"\n}\n  \n{\n  "type": "Hash160",\n  "value": "0xf621168b1fce3a89c33a5f6bcf7e774b4657031c"\n}\n \n{\n  "type": "ByteArray",\n  "value": "7472616e73666572"\n}\n')),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)("p",null,"Request body:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "jsonrpc": "2.0",\n    "id": 1,\n    "method": "invokefunction",\n    "params": [\n        "0xf61eebf573ea36593fd43aa150c055ad7906ab83",\n        "transfer",\n        [\n            {\n                "type": "Hash160",\n                "value": "0x86df72a6b4ab5335d506294f9ce993722253b6e2"\n            },\n            {\n                "type": "Hash160",\n                "value": "0xebae4ab3f21765e5f604dfdd590fdf142cfb89fa"\n            },\n            {\n                "type": "Integer",\n                "value": "10000"\n            },\n            {\n                "type": "String",\n                "value": ""\n            }\n        ],\n        [\n            {\n                "account": "0x86df72a6b4ab5335d506294f9ce993722253b6e2",\n                "scopes": "CalledByEntry",\n                "allowedcontracts": [],\n                "allowedgroups": []\n            }\n        ]\n    ]\n}\n')),(0,i.kt)("p",null,"Response body:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "jsonrpc": "2.0",\n    "id": 1,\n    "result": {\n        "script": "DAABECcMFPqJ+ywU3w9Z3d8E9uVlF/KzSq7rDBTitlMicpPpnE8pBtU1U6u0pnLfhhTAHwwIdHJhbnNmZXIMFIOrBnmtVcBQoTrUP1k26nP16x72QWJ9W1I=",\n        "state": "HALT",\n        "gasconsumed": "999972",\n        "exception": null,\n        "stack": [\n            {\n                "type": "Boolean",\n                "value": true\n            }\n        ],\n        "tx": "AI3PBQRolZgAAAAAAMrSEgAAAAAAtRcAAAHitlMicpPpnE8pBtU1U6u0pnLfhgEAWQwAARAnDBT6ifssFN8PWd3fBPblZRfys0qu6wwU4rZTInKT6ZxPKQbVNVOrtKZy34YUwB8MCHRyYW5zZmVyDBSDqwZ5rVXAUKE61D9ZNupz9ese9kFifVtSAUIMQB87UjubTE7Kb/fOe8Yu2QDUQJ6c5pL9LjcoFaNkEiJzLY5yd72jrsvVbVFNZ6ObWloAmLkjCgDXw9enkVtwVBMrEQwhAs7UMjl93ETtugMcC8O5M/KP3ZZ3eS17IObANt2qrPHiEQtBE43vrw=="\n    }\n}\n')),(0,i.kt)("p",null,"Response description:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"script: the invocation script of the contract. You can analysis from ",(0,i.kt)("a",{parentName:"p",href:"https://neo.org/converter"},"https://neo.org/converter")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"SYSCALL System.Contract.Call\nPUSHDATA1 0xf61eebf573ea36593fd43aa150c055ad7906ab83\nPUSHDATA1 transfer\nPUSHDATA1 0x86df72a6b4ab5335d506294f9ce993722253b6e2\nPUSHDATA1 0xebae4ab3f21765e5f604dfdd590fdf142cfb89fa\nPUSHINT16 10000\nPUSHDATA1\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"state:  ",(0,i.kt)("inlineCode",{parentName:"p"},"HALT")," means the vm executed successfully, and",(0,i.kt)("inlineCode",{parentName:"p"},"FAULT")," means the vm exited due to an exception. ")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"gasconsumed: the system fee consumed for invocation.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"stack: the contract execution result. If the value is String or ByteArray, it is encoded by Base64.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"tx: the transaction's hex string of this invocation, need open wallet and added signers correctly."))),(0,i.kt)("h2",{id:"about-iterator"},"About iterator"),(0,i.kt)("p",null,"If the execution result of contract includes iterators, the iteration times are constrained according to the ",(0,i.kt)("inlineCode",{parentName:"p"},"MaxIteratorResultItems")," value configured in the  ",(0,i.kt)("inlineCode",{parentName:"p"},"RpcServer")," ",(0,i.kt)("inlineCode",{parentName:"p"},"config")," file. The default limit is 100 times."),(0,i.kt)("p",null,"In the following example, up to 6 returned results are actually available. When the ",(0,i.kt)("inlineCode",{parentName:"p"},"MaxIteratorResultItems ")," value is 5, only 5 iterations are returned and ",(0,i.kt)("inlineCode",{parentName:"p"},"truncated")," is true, indicating that there is still data to be returned."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n    "jsonrpc": "2.0",\n    "id": 3,\n    "result": {\n        "script": "wh8MBnRva2VucwwUR7xWZRSFd3BpKcM7Mj3g3v4/u3ZBYn1bUg==",\n        "state": "HALT",\n        "gasconsumed": "2288880",\n        "exception": null,\n        "stack": [\n            {\n                "type": "InteropInterface",\n                "iterator": [\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDMuY3A="\n                    },\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDUuY3A="\n                    },\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDEuY3A="\n                    },\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDIuY3A="\n                    },\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDQuY3A="\n                    }\n                ],\n                "truncated": true\n            }\n        ]\n    }\n}\n')),(0,i.kt)("p",null,"When the ",(0,i.kt)("inlineCode",{parentName:"p"},"MaxIteratorResultItems ")," value is greater than or equal to 6, then 6 iterations are returned and ",(0,i.kt)("inlineCode",{parentName:"p"},"truncated")," is false, indicating that all data has been returned."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n    "jsonrpc": "2.0",\n    "id": 3,\n    "result": {\n        "script": "wh8MBnRva2VucwwUR7xWZRSFd3BpKcM7Mj3g3v4/u3ZBYn1bUg==",\n        "state": "HALT",\n        "gasconsumed": "2288880",\n        "exception": null,\n        "stack": [\n            {\n                "type": "InteropInterface",\n                "iterator": [\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDMuY3A="\n                    },\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDUuY3A="\n                    },\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDEuY3A="\n                    },\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDIuY3A="\n                    },\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDQuY3A="\n                    },\n                    {\n                        "type": "ByteString",\n                        "value": "Ymp5eDYuY3A="\n                    }\n                ],\n                "truncated": false\n            }\n        ]\n    }\n}\n')))}d.isMDXComponent=!0}}]);